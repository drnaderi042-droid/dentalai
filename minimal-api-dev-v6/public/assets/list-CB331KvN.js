import{j as e,S as C,dd as L,L as D,p as W,R as H,B as u,I as S,cV as G,b9 as V,d as _,dl as M,bb as Q,bc as q,h as K,dm as Y,dn as J,r as g,aB as X,T as y,n as Z,c9 as ee,be as te,o as A,dp as B,ar as re,az as se,dq as ne,cg as oe,v as U,cb as ae,k as ie,dr as le,ds as ce,dt as de,du as pe,dv as me,dw as xe,e as he,dx as T,H as ue,C as ge}from"./index-BH9ijvcg.js";import{u as je,a as be}from"./product-B0QOgzu_.js";import"./product-review-new-form-gS03W1Ug.js";import{u as fe}from"./use-debounce-1Pol-l2r.js";import{E as ye}from"./empty-content-CTwJtcn7.js";import{b as $}from"./format-number-z67FV_-O.js";import{I as Ce}from"./image-CxkC95SJ.js";import{C as Re,a as Se}from"./color-preview-BjGoTE6q.js";import{u as z}from"./use-checkout-context-BGfU8dXo.js";import{C as ve}from"./Card-CwEGl0A2.js";import{F as ke}from"./Fab-C2bZThbR.js";import{P as Pe}from"./product-skeleton-CBrKWrj6.js";import{P as Ie,p as we}from"./Pagination-DOr1EQcv.js";import{A as Fe}from"./Autocomplete-Crt2raTS.js";import{T as Oe}from"./TextField-DgF_8CdY.js";import{C as Te}from"./cart-icon-c2JItyij.js";import{F as E}from"./FormControlLabel-CVzZoZzb.js";import{C as Le}from"./Checkbox-AhG6TMzi.js";import{a as Ae}from"./RadioGroup-7Oa-Pyj3.js";import{S as Be}from"./Slider-nP-7N9E2.js";import{R as $e}from"./Rating-BeEojfFm.js";import{F as Ee,a as w,c as F}from"./filters-result-C-KhAJgH.js";import{C as O}from"./Chip-CWilL4Fh.js";import"./form-provider-b5GXhABL.js";import"./editor-BUp8U2Vl.js";import"./incrementer-button-BMya6Qfr.js";import"./carousel-progress-bar-ZvHXeJ31.js";import"./html-to-markdown-Daz6g1i5.js";import"./index-BUoyIWvZ.js";import"./zod-DcsM6yCN.js";import"./schema-helper-DNntP_fU.js";import"./CardHeader-BBcGHbnO.js";import"./LoadingButton-jh3yI-IT.js";import"./DialogTitle-BFho6EhL.js";import"./dialogTitleClasses-CSmkbKpM.js";import"./DialogContent-CtzR1nPJ.js";import"./Skeleton-Mn58_7nY.js";import"./LastPage-DkhatgKI.js";import"./Select-fMsy-Lkz.js";import"./Menu-C7S9TApF.js";import"./InputLabel-OzeQogzC.js";import"./FormLabel-Cn8enUsF.js";import"./FormHelperText-CAGzEAMm.js";import"./FormControl-rHOkSiGz.js";import"./FormGroup-BEVR9nif.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-DVaqB1VX.js";import"./countries-DSLisFCy.js";import"./country-select-DjjsCD_N.js";import"./upload-BVxhxEL6.js";import"./preview-multi-file--Yn4-mQ8.js";import"./file-thumbnail-GgYbZAeX.js";import"./upload-avatar-Dm2-m_zx.js";import"./avatar-url-votlVkc-.js";import"./DatePicker-Br6g6rY4.js";import"./ListItem-Ch3K_gMr.js";import"./MobileDateTimePicker-CzN3TBFx.js";import"./index-BVzUWzoE.js";function Ne({product:t}){const m=z(),{id:a,name:n,coverUrl:r,price:c,colors:d,available:i,sizes:o,priceSale:l,newLabel:p,saleLabel:x}=t,h=W.product.details(a),b=async()=>{const f={id:a,name:n,coverUrl:r,available:i,price:c,colors:[d[0]],size:o[0],quantity:1};try{m.onAddToCart(f)}catch(s){console.error(s)}},v=(p.enabled||x.enabled)&&e.jsxs(C,{direction:"row",alignItems:"center",spacing:1,sx:{position:"absolute",zIndex:9,top:16,right:16},children:[p.enabled&&e.jsx(L,{variant:"filled",color:"info",children:p.content}),x.enabled&&e.jsx(L,{variant:"filled",color:"error",children:x.content})]}),k=e.jsxs(u,{sx:{position:"relative",p:1},children:[!!i&&e.jsx(ke,{color:"warning",size:"medium",className:"add-cart-btn",onClick:b,sx:{right:16,bottom:16,zIndex:9,opacity:0,position:"absolute",transition:f=>f.transitions.create("all",{easing:f.transitions.easing.easeInOut,duration:f.transitions.duration.shorter})},children:e.jsx(S,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(G,{title:!i&&"Out of stock",placement:"bottom-end",children:e.jsx(Ce,{alt:n,src:r,ratio:"1/1",sx:{borderRadius:1.5,...!i&&{opacity:.48,filter:"grayscale(1)"}}})})]}),P=e.jsxs(C,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(D,{component:H,href:h,color:"inherit",variant:"subtitle2",noWrap:!0,children:n}),e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Re,{colors:d}),e.jsxs(C,{direction:"row",spacing:.5,sx:{typography:"subtitle1"},children:[l&&e.jsx(u,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:$(l)}),e.jsx(u,{component:"span",children:$(c)})]})]})]});return e.jsxs(ve,{sx:{"&:hover .add-cart-btn":{opacity:1}},children:[v,k,P]})}function We({products:t,loading:m,...a}){const n=e.jsx(Pe,{}),r=t.map(c=>e.jsx(Ne,{product:c},c.id));return e.jsxs(e.Fragment,{children:[e.jsx(u,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},...a,children:m?n:r}),t.length>8&&e.jsx(Ie,{count:8,sx:{mt:{xs:5,md:8},[`& .${we.ul}`]:{justifyContent:"center"}}})]})}function Ge({sort:t,onSort:m,sortOptions:a}){var c;const n=V(),r=(c=a.find(d=>d.value===t))==null?void 0:c.label;return e.jsxs(e.Fragment,{children:[e.jsxs(_,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(S,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(u,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:r})]}),e.jsx(M,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsx(Q,{children:a.map(d=>e.jsx(q,{selected:d.value===t,onClick:()=>{n.onClose(),m(d.value)},children:d.label},d.value))})})]})}function _e({query:t,results:m,onSearch:a,loading:n}){const r=K(),c=i=>{r.push(W.product.details(i))},d=i=>{if(t&&i.key==="Enter"){const o=m.filter(l=>l.name===t)[0];c(o.id)}};return e.jsx(Fe,{sx:{width:{xs:1,sm:260}},loading:n,autoHighlight:!0,popupIcon:null,options:m,onInputChange:(i,o)=>a(o),getOptionLabel:i=>i.name,noOptionsText:e.jsx(te,{query:t}),isOptionEqualToValue:(i,o)=>i.id===o.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${ee.option}`]:{pl:.75}}}},renderInput:i=>e.jsx(Oe,{...i,placeholder:"Search...",onKeyUp:d,InputProps:{...i.InputProps,startAdornment:e.jsx(Z,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[n?e.jsx(S,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,i.InputProps.endAdornment]})}}),renderOption:(i,o,{inputValue:l})=>{const p=Y(o.name,l),x=J(o.name,p);return g.createElement(u,{component:"li",...i,onClick:()=>c(o.id),key:o.id},e.jsx(X,{alt:o.name,src:o.coverUrl,variant:"rounded",sx:{mr:1.5,width:48,height:48,flexShrink:0,borderRadius:1}},o.id),e.jsx("div",{children:x.map((h,b)=>e.jsx(y,{component:"span",color:h.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:h.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:h.text},b))},l))}})}function Ue({open:t,onOpen:m,onClose:a,canReset:n,filters:r,options:c}){const d=[...Array(21)].map((s,j)=>{const R=j*10,I=j===0?`$${R}`:`${R}`;return{value:R,label:j%4?"":I}}),i=g.useCallback(s=>{const j=r.state.gender.includes(s)?r.state.gender.filter(R=>R!==s):[...r.state.gender,s];r.setState({gender:j})},[r]),o=g.useCallback(s=>{r.setState({category:s})},[r]),l=g.useCallback(s=>{r.setState({colors:s})},[r]),p=g.useCallback((s,j)=>{r.setState({priceRange:j})},[r]),x=g.useCallback(s=>{r.setState({rating:s})},[r]),h=e.jsxs(e.Fragment,{children:[e.jsxs(u,{display:"flex",alignItems:"center",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(y,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(G,{title:"Reset",children:e.jsx(A,{onClick:r.onResetState,children:e.jsx(B,{color:"error",variant:"dot",invisible:!n,children:e.jsx(S,{icon:"solar:restart-bold"})})})}),e.jsx(A,{onClick:a,children:e.jsx(S,{icon:"mingcute:close-line"})})]}),e.jsx(re,{sx:{borderStyle:"dashed"}})]}),b=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1},children:"Gender"}),c.genders.map(s=>e.jsx(E,{control:e.jsx(Le,{checked:r.state.gender.includes(s.label),onClick:()=>i(s.label)}),label:s.label},s.value))]}),v=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1},children:"Category"}),c.categories.map(s=>e.jsx(E,{control:e.jsx(Ae,{checked:s===r.state.category,onClick:()=>o(s)}),label:s,sx:{...s==="all"&&{textTransform:"capitalize"}}},s))]}),k=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1},children:"Color"}),e.jsx(Se,{selected:r.state.colors,onSelectColor:s=>l(s),colors:c.colors,limit:6})]}),P=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(y,{variant:"subtitle2",children:"Price"}),e.jsxs(u,{gap:5,display:"flex",sx:{my:2},children:[e.jsx(N,{type:"min",value:r.state.priceRange,onFilters:r.setState}),e.jsx(N,{type:"max",value:r.state.priceRange,onFilters:r.setState})]}),e.jsx(Be,{value:r.state.priceRange,onChange:p,step:10,min:0,max:200,marks:d,getAriaValueText:s=>`$${s}`,valueLabelFormat:s=>`$${s}`,sx:{alignSelf:"center",width:"calc(100% - 24px)"}})]}),f=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(y,{variant:"subtitle2",sx:{mb:2},children:"Rating"}),c.ratings.map((s,j)=>e.jsxs(u,{onClick:()=>x(s),sx:{mb:1,gap:1,ml:-1,p:.5,display:"flex",borderRadius:1,cursor:"pointer",typography:"body2",alignItems:"center","&:hover":{opacity:.48},...r.state.rating===s&&{bgcolor:"action.selected"}},children:[e.jsx($e,{readOnly:!0,value:4-j})," & Up"]},s))]});return e.jsxs(e.Fragment,{children:[e.jsx(_,{disableRipple:!0,color:"inherit",endIcon:e.jsx(B,{color:"error",variant:"dot",invisible:!n,children:e.jsx(S,{icon:"ic:round-filter-list"})}),onClick:m,children:"Filters"}),e.jsxs(se,{anchor:"right",open:t,onClose:a,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:[h,e.jsx(ne,{sx:{px:2.5,py:3},children:e.jsxs(C,{spacing:3,children:[b,v,k,P,f]})})]})]})}function N({type:t,value:m,onFilters:a}){const n=m[0],r=m[1],c=g.useCallback(()=>{n<0&&a({priceRange:[0,r]}),n>200&&a({priceRange:[200,r]}),r<0&&a({priceRange:[n,0]}),r>200&&a({priceRange:[n,200]})},[r,n,a]);return e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:1},children:[e.jsx(y,{variant:"caption",sx:{flexShrink:0,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightSemiBold"},children:`${t} ($)`}),e.jsx(oe,{fullWidth:!0,value:t==="min"?n:r,onChange:d=>a(t==="min"?{priceRange:[Number(d.target.value),r]}:{priceRange:[n,Number(d.target.value)]}),onBlur:c,inputProps:{step:10,min:0,max:200,type:"number","aria-labelledby":"input-slider"},sx:{maxWidth:48,borderRadius:.75,bgcolor:d=>U(d.vars.palette.grey["500Channel"],.08),[`& .${ae.input}`]:{pr:1,py:.75,textAlign:"right",typography:"body2"}}})]})}function ze({filters:t,totalResults:m,sx:a}){const n=o=>{const l=t.state.gender.filter(p=>p!==o);t.setState({gender:l})},r=()=>{t.setState({category:"all"})},c=o=>{const l=t.state.colors.filter(p=>p!==o);t.setState({colors:l})},d=()=>{t.setState({priceRange:[0,200]})},i=()=>{t.setState({rating:""})};return e.jsxs(Ee,{totalResults:m,onReset:t.onResetState,sx:a,children:[e.jsx(w,{label:"Gender:",isShow:!!t.state.gender.length,children:t.state.gender.map(o=>g.createElement(O,{...F,key:o,label:o,onDelete:()=>n(o)}))}),e.jsx(w,{label:"Category:",isShow:t.state.category!=="all",children:e.jsx(O,{...F,label:t.state.category,onDelete:r})}),e.jsx(w,{label:"Colors:",isShow:!!t.state.colors.length,children:t.state.colors.map(o=>g.createElement(O,{...F,key:o,label:e.jsx(u,{sx:{ml:-.5,width:18,height:18,bgcolor:o,borderRadius:"50%",border:l=>`solid 1px ${U(l.vars.palette.common.whiteChannel,.24)}`}}),onDelete:()=>c(o)}))}),e.jsx(w,{label:"Price:",isShow:t.state.priceRange[0]!==0||t.state.priceRange[1]!==200,children:e.jsx(O,{...F,label:`$${t.state.priceRange[0]} - ${t.state.priceRange[1]}`,onDelete:d})}),e.jsx(w,{label:"Rating:",isShow:!!t.state.rating,children:e.jsx(O,{...F,label:t.state.rating,onDelete:i})})]})}function De({products:t,loading:m}){const a=z(),n=ie(),[r,c]=g.useState("featured"),[d,i]=g.useState(""),o=fe(d),l=le({gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]}),{searchResults:p,searchLoading:x}=je(o),h=He({inputData:t,filters:l.state,sortBy:r}),b=l.state.gender.length>0||l.state.colors.length>0||l.state.rating!==""||l.state.category!=="all"||l.state.priceRange[0]!==0||l.state.priceRange[1]!==200,v=!h.length&&b,k=g.useCallback(I=>{c(I)},[]),P=g.useCallback(I=>{i(I)},[]),f=!m&&!t.length,s=e.jsxs(C,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(_e,{query:o,results:p,onSearch:P,loading:x}),e.jsxs(C,{direction:"row",spacing:1,flexShrink:0,children:[e.jsx(Ue,{filters:l,canReset:b,open:n.value,onOpen:n.onTrue,onClose:n.onFalse,options:{colors:me,ratings:pe,genders:de,categories:["all",...ce]}}),e.jsx(Ge,{sort:r,onSort:k,sortOptions:xe})]})]}),j=e.jsx(ze,{filters:l,totalResults:h.length}),R=e.jsx(ye,{filled:!0,sx:{py:10}});return e.jsxs(he,{sx:{mb:15},children:[e.jsx(Te,{totalItems:a.totalItems}),e.jsx(y,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs(C,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[s,b&&j]}),(v||f)&&R,e.jsx(We,{products:h,loading:m})]})}function He({inputData:t,filters:m,sortBy:a}){const{gender:n,category:r,colors:c,priceRange:d,rating:i}=m,o=d[0],l=d[1];return a==="featured"&&(t=T(t,["totalSold"],["desc"])),a==="newest"&&(t=T(t,["createdAt"],["desc"])),a==="priceDesc"&&(t=T(t,["price"],["desc"])),a==="priceAsc"&&(t=T(t,["price"],["asc"])),n.length&&(t=t.filter(p=>p.gender.some(x=>n.includes(x)))),r!=="all"&&(t=t.filter(p=>p.category===r)),c.length&&(t=t.filter(p=>p.colors.some(x=>c.includes(x)))),(o!==0||l!==200)&&(t=t.filter(p=>p.price>=o&&p.price<=l)),i&&(t=t.filter(p=>{const x=h=>h==="up4Star"?4:h==="up3Star"?3:h==="up2Star"?2:1;return p.totalRatings>x(i)})),t}const Ve={title:`Product shop - ${ge.site.name}`};function Yt(){const{products:t,productsLoading:m}=be();return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsxs("title",{children:[" ",Ve.title]})}),e.jsx(De,{products:t,loading:m})]})}export{Yt as default};
