import{b as k,b9 as T,h as B,j as s,S as P,B as a,dd as v,aL as F,L as O,aD as I,p as d,R as w,T as R,o as z,I as n,aB as E,dl as A,bb as G,bc as y,r as h,dr as H,e5 as N,d as V,cL as Q,cK as M,dx as C,H as U,C as _}from"./index-BSItzkt3.js";import{u as $}from"./use-debounce-CtY285jN.js";import{P as q}from"./_blog-C6iFTPs4.js";import{a as K,u as W}from"./blog-g_bG-jCO.js";import{C as D}from"./custom-breadcrumbs-u_kfWYpE.js";import{P as J,a as X}from"./post-search-D1MGvgQK.js";import{P as Y}from"./post-skeleton-00ZeRUNf.js";import{c as S}from"./format-number-BVcmMM5V.js";import{I as Z}from"./image-BuqYs7tq.js";import{C as ss}from"./Card-BqWDE3fr.js";import{P as es,p as ts}from"./Pagination-DCxMl0QM.js";import"./post-comment-form-D9jkEQzx.js";import"./html-to-markdown-CuRjBHl-.js";import"./index-WR0nwbrK.js";import"./Autocomplete-B4c-hVbi.js";import"./Select-QPCMlUZ4.js";import"./Menu-Cy0n4kRw.js";import"./Chip-CHY_XJWs.js";import"./TextField-DpdcsLRb.js";import"./InputLabel-DqZ4yv4U.js";import"./FormLabel-Dg62SF9b.js";import"./FormHelperText-CBXzj8d7.js";import"./FormControl-1z33WGqh.js";import"./Skeleton-CVH0eaWu.js";import"./LastPage-DHcM-itg.js";import"./zod-BOXuI70n.js";import"./form-provider-IFaCVrX4.js";import"./Rating-LRaLudfA.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-cOR4tKCy.js";import"./index-DC_o48Ax.js";import"./Slider-B4qW6LuH.js";import"./RadioGroup-DuXlXr3g.js";import"./FormGroup-DIAu_15X.js";import"./FormControlLabel-CtXEP1QR.js";import"./index-b5NUrSMh.js";import"./countries-DSLisFCy.js";import"./country-select-B4qFdROS.js";import"./Checkbox-p5PKnry8.js";import"./upload-C5NUn5Ko.js";import"./preview-multi-file-C1SdoyfF.js";import"./file-thumbnail-J0C6dV__.js";import"./upload-avatar-DTAGrxFf.js";import"./avatar-url-S8pB8DFh.js";import"./DatePicker-BK0jorBV.js";import"./dialogTitleClasses-BJYaWiXv.js";import"./ListItem-Doeuyi4X.js";import"./DialogContent-CPx_wcNJ.js";import"./MobileDateTimePicker-Baldv5MM.js";import"./schema-helper-DeS_g_Vm.js";import"./markdown-DkFU1EoS.js";import"./empty-content-Cx4hswZg.js";import"./Zoom-DF_Z3Wyp.js";import"./Fab-y6_dLooR.js";import"./LoadingButton-HyVDRRh6.js";import"./CardHeader-CavtfEuu.js";function os({post:e}){const l=k(),t=T(),i=B(),{title:r,author:c,publish:x,coverUrl:u,createdAt:f,totalViews:p,totalShares:j,totalComments:b,description:g}=e;return s.jsxs(s.Fragment,{children:[s.jsxs(ss,{sx:{display:"flex"},children:[s.jsxs(P,{spacing:1,sx:{p:l.spacing(3,3,2,3)},children:[s.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[s.jsx(v,{variant:"soft",color:x==="published"&&"info"||"default",children:x}),s.jsx(a,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:F(f)})]}),s.jsxs(P,{spacing:1,flexGrow:1,children:[s.jsx(O,{component:w,href:d.dashboard.post.details(r),color:"inherit",variant:"subtitle2",sx:{...I({line:2})},children:r}),s.jsx(R,{variant:"body2",sx:{...I({line:2}),color:"text.secondary"},children:g})]}),s.jsxs(a,{display:"flex",alignItems:"center",children:[s.jsx(z,{color:t.open?"inherit":"default",onClick:t.onOpen,children:s.jsx(n,{icon:"eva:more-horizontal-fill"})}),s.jsxs(a,{gap:1.5,flexGrow:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[s.jsxs(a,{display:"flex",alignItems:"center",gap:.5,children:[s.jsx(n,{icon:"eva:message-circle-fill",width:16}),S(b)]}),s.jsxs(a,{display:"flex",alignItems:"center",gap:.5,children:[s.jsx(n,{icon:"solar:eye-bold",width:16}),S(p)]}),s.jsxs(a,{display:"flex",alignItems:"center",gap:.5,children:[s.jsx(n,{icon:"solar:share-bold",width:16}),S(j)]})]})]})]}),s.jsxs(a,{sx:{p:1,width:180,height:240,flexShrink:0,position:"relative",display:{xs:"none",sm:"block"}},children:[s.jsx(E,{alt:c.name,src:c.avatarUrl,sx:{top:16,right:16,zIndex:9,position:"absolute"}}),s.jsx(Z,{alt:r,src:u,sx:{height:1,borderRadius:1.5}})]})]}),s.jsx(A,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"bottom-center"}},children:s.jsxs(G,{children:[s.jsxs(y,{onClick:()=>{t.onClose(),i.push(d.dashboard.post.details(r))},children:[s.jsx(n,{icon:"solar:eye-bold"}),"View"]}),s.jsxs(y,{onClick:()=>{t.onClose(),i.push(d.dashboard.post.edit(r))},children:[s.jsx(n,{icon:"solar:pen-bold"}),"Edit"]}),s.jsxs(y,{onClick:()=>{t.onClose()},sx:{color:"error.main"},children:[s.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})})]})}function rs({posts:e,loading:l}){const t=s.jsx(Y,{variant:"horizontal"}),i=e.map(r=>s.jsx(os,{post:r},r.id));return s.jsxs(s.Fragment,{children:[s.jsx(a,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:l?t:i}),e.length>8&&s.jsx(es,{count:8,sx:{mt:{xs:5,md:8},[`& .${ts.ul}`]:{justifyContent:"center"}}})]})}function is(){const[e,l]=h.useState("latest"),[t,i]=h.useState(""),r=$(t),{posts:c,postsLoading:x}=K(),{searchResults:u,searchLoading:f}=W(r),p=H({publish:"all"}),j=as({inputData:c,filters:p.state,sortBy:e}),b=h.useCallback(o=>{l(o)},[]),g=h.useCallback(o=>{i(o)},[]),L=h.useCallback((o,m)=>{p.setState({publish:m})},[p]);return s.jsxs(N,{children:[s.jsx(D,{heading:"List",links:[{name:"Dashboard",href:d.dashboard.root},{name:"Blog",href:d.dashboard.post.root},{name:"List"}],action:s.jsx(V,{component:w,href:d.dashboard.post.new,variant:"contained",startIcon:s.jsx(n,{icon:"mingcute:add-line"}),children:"New post"}),sx:{mb:{xs:3,md:5}}}),s.jsxs(P,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[s.jsx(J,{query:r,results:u,onSearch:g,loading:f,hrefItem:o=>d.dashboard.post.details(o)}),s.jsx(X,{sort:e,onSort:b,sortOptions:q})]}),s.jsx(Q,{value:p.state.publish,onChange:L,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(o=>s.jsx(M,{iconPosition:"end",value:o,label:o,icon:s.jsxs(v,{variant:(o==="all"||o===p.state.publish)&&"filled"||"soft",color:o==="published"&&"info"||"default",children:[o==="all"&&c.length,o==="published"&&c.filter(m=>m.publish==="published").length,o==="draft"&&c.filter(m=>m.publish==="draft").length]}),sx:{textTransform:"capitalize"}},o))}),s.jsx(rs,{posts:j,loading:x})]})}const as=({inputData:e,filters:l,sortBy:t})=>{const{publish:i}=l;return t==="latest"&&(e=C(e,["createdAt"],["desc"])),t==="oldest"&&(e=C(e,["createdAt"],["asc"])),t==="popular"&&(e=C(e,["totalViews"],["desc"])),i!=="all"&&(e=e.filter(r=>r.publish===i)),e},ns={title:`Post list | Dashboard - ${_.site.name}`};function pe(){return s.jsxs(s.Fragment,{children:[s.jsx(U,{children:s.jsxs("title",{children:[" ",ns.title]})}),s.jsx(is,{})]})}export{pe as default};
