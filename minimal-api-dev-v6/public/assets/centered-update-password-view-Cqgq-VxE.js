import{j as e,S as o,T as l,L as j,p as g,R as y,I as w,k as V,dg as D,i as E,r as R,n as L,o as A,A as U,e4 as N}from"./index-BH9ijvcg.js";import{t as I,z as n}from"./zod-DcsM6yCN.js";import{u as S,a as P,F as a}from"./form-provider-b5GXhABL.js";import{E as z,P as W,S as q}from"./new-password-icon-DKQoyiSa.js";import"./image-CxkC95SJ.js";import"./editor-BUp8U2Vl.js";import{L as T}from"./LoadingButton-jh3yI-IT.js";const H=n.object({code:n.string().min(1,{message:"کد الزامی است!"}).min(6,{message:"کد باید حداقل ۶ کاراکتر باشد!"}),email:n.string().min(1,{message:"ایمیل الزامی است!"}).email({message:"ایمیل باید معتبر باشد!"})});function _(){const s={code:"",email:""},c=S({resolver:I(H),defaultValues:s}),{handleSubmit:t,formState:{isSubmitting:m}}=c,d=t(async u=>{try{await new Promise(i=>setTimeout(i,500)),console.info("DATA",u)}catch(i){console.error(i)}}),h=e.jsxs(e.Fragment,{children:[e.jsx(z,{sx:{mx:"auto"}}),e.jsxs(o,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(l,{variant:"h5",children:"لطفاً ایمیل خود را بررسی کنید!"}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:`ما یک کد تأیید ۶ رقمی به ایمیل شما ارسال کرده‌ایم. 
لطفاً کد را در کادر زیر وارد کنید تا ایمیل خود را تأیید کنید.`})]})]}),x=e.jsxs(o,{spacing:3,children:[e.jsx(a.Text,{name:"email",label:"آدرس ایمیل",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(a.Code,{name:"code"}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"در حال تأیید...",children:"تأیید"}),e.jsxs(l,{variant:"body2",sx:{mx:"auto"},children:["کد ندارید؟ ",e.jsx(j,{variant:"subtitle2",sx:{cursor:"pointer"},children:"ارسال مجدد کد"})]}),e.jsxs(j,{component:y,href:g.authDemo.centered.signIn,color:"inherit",variant:"subtitle2",sx:{mx:"auto",alignItems:"center",display:"inline-flex"},children:[e.jsx(w,{icon:"eva:arrow-ios-back-fill",width:16,sx:{mr:.5}}),"بازگشت به ورود"]})]});return e.jsxs(e.Fragment,{children:[h,e.jsx(P,{methods:c,onSubmit:d,children:x})]})}const B=n.object({email:n.string().min(1,{message:"ایمیل الزامی است!"}).email({message:"ایمیل باید معتبر باشد!"}),password:n.string().min(1,{message:"رمز عبور الزامی است!"}).min(6,{message:"رمز عبور باید حداقل ۶ کاراکتر باشد!"})});function ee(){const s=V(),c=D(),{login:t}=E(),[m,d]=R.useState(""),h={email:"",password:""},x=S({resolver:I(B),defaultValues:h}),{handleSubmit:u,formState:{isSubmitting:i}}=x,b=u(async k=>{var p;try{d(""),await(t==null?void 0:t(k.email,k.password)),c(g.dashboard.root)}catch(r){console.error("Login error:",r);let f="خطا در ورود";r instanceof Error?f=r.message||f:typeof r=="string"?f=r:r!=null&&r.message?f=r.message:(p=r==null?void 0:r.data)!=null&&p.message&&(f=r.data.message),d(f)}}),C=e.jsx(N,{sx:{mb:3,mx:"auto"}}),F=e.jsxs(o,{alignItems:"center",spacing:1.5,sx:{mb:5},children:[e.jsx(l,{variant:"h5",children:"ورود به حساب کاربری"}),e.jsxs(o,{direction:"row",spacing:.5,children:[e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:"حساب کاربری ندارید؟"}),e.jsx(j,{component:y,href:g.authDemo.centered.signUp,variant:"subtitle2",children:"ثبت نام"})]})]}),v=e.jsxs(o,{spacing:3,children:[e.jsx(a.Text,{name:"email",label:"آدرس ایمیل",InputLabelProps:{shrink:!0}}),e.jsxs(o,{spacing:1.5,children:[e.jsx(j,{component:y,href:g.authDemo.centered.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"رمز عبور را فراموش کرده‌اید؟"}),e.jsx(a.Text,{name:"password",label:"رمز عبور",placeholder:"۶ کاراکتر یا بیشتر",type:s.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(A,{onClick:s.onToggle,edge:"end",children:e.jsx(w,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(T,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:i,loadingIndicator:"ورود...",children:"ورود"})]});return e.jsxs(e.Fragment,{children:[C,F,!!m&&e.jsx(U,{severity:"error",sx:{mb:3},children:m}),e.jsx(P,{methods:x,onSubmit:b,children:v})]})}const M=n.object({firstName:n.string().min(1,{message:"نام الزامی است!"}),lastName:n.string().min(1,{message:"نام خانوادگی الزامی است!"}),email:n.string().min(1,{message:"ایمیل الزامی است!"}).email({message:"ایمیل باید معتبر باشد!"}),phone:n.string().optional(),password:n.string().min(1,{message:"رمز عبور الزامی است!"}).min(6,{message:"رمز عبور باید حداقل ۶ کاراکتر باشد!"}),specialty:n.string().optional(),licenseNumber:n.string().optional()});function se(){const s=V(),c=D(),{login:t}=E(),m={firstName:"",lastName:"",email:"",phone:"",password:"",specialty:"",licenseNumber:""},d=S({resolver:I(M),defaultValues:m}),{handleSubmit:h,formState:{isSubmitting:x},watch:u}=d,i=h(async v=>{const k={...v,role:"PATIENT"};try{const p=await fetch("http://localhost:7272/api/auth/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),r=await p.json();if(!p.ok)throw new Error(r.message||"Registration failed");await(t==null?void 0:t(v.email,v.password)),c(g.dashboard.root)}catch(p){console.error("Registration error:",p),alert(`خطا در ثبت نام: ${p.message}`)}}),b=e.jsx(N,{sx:{mb:3,mx:"auto"}}),C=e.jsxs(o,{alignItems:"center",spacing:1.5,sx:{mb:5},children:[e.jsx(l,{variant:"h5",children:"ثبت نام پزشکان"}),e.jsxs(o,{direction:"row",spacing:.5,children:[e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:"حساب کاربری دارید؟"}),e.jsx(j,{component:y,href:g.authDemo.centered.signIn,variant:"subtitle2",children:"وارد شوید"})]})]}),F=e.jsxs(o,{spacing:3,children:[e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a.Text,{name:"firstName",label:"نام",InputLabelProps:{shrink:!0}}),e.jsx(a.Text,{name:"lastName",label:"نام خانوادگی",InputLabelProps:{shrink:!0}})]}),e.jsx(a.Text,{name:"email",label:"ایمیل",InputLabelProps:{shrink:!0}}),e.jsx(a.Text,{name:"phone",label:"شماره تلفن",InputLabelProps:{shrink:!0}}),e.jsx(a.Text,{name:"password",label:"رمز عبور",placeholder:"۶ کاراکتر یا بیشتر",type:s.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(A,{onClick:s.onToggle,edge:"end",children:e.jsx(w,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(T,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:x,loadingIndicator:"ایجاد حساب...",children:"ایجاد حساب"})]});return e.jsxs(e.Fragment,{children:[b,C,e.jsx(P,{methods:d,onSubmit:i,children:F})]})}const O=n.object({email:n.string().min(1,{message:"ایمیل الزامی است!"}).email({message:"ایمیل باید معتبر باشد!"})});function ne(){const s={email:""},c=S({resolver:I(O),defaultValues:s}),{handleSubmit:t,formState:{isSubmitting:m}}=c,d=t(async u=>{try{await new Promise(i=>setTimeout(i,500)),console.info("DATA",u)}catch(i){console.error(i)}}),h=e.jsxs(e.Fragment,{children:[e.jsx(W,{sx:{mx:"auto"}}),e.jsxs(o,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(l,{variant:"h5",children:"رمز عبور خود را فراموش کرده‌اید؟"}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:"لطفا آدرس ایمیلی که با حساب کاربری خود مرتبط است را وارد کنید و ما یک لینک برای بازنشانی رمز عبور برای شما ایمیل خواهیم کرد."})]})]}),x=e.jsxs(o,{spacing:3,children:[e.jsx(a.Text,{name:"email",label:"آدرس ایمیل",placeholder:"example@gmail.com",autoFocus:!0,InputLabelProps:{shrink:!0}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"در حال ارسال درخواست...",children:"ارسال درخواست"}),e.jsxs(j,{component:y,href:g.authDemo.centered.signIn,color:"inherit",variant:"subtitle2",sx:{mx:"auto",alignItems:"center",display:"inline-flex"},children:[e.jsx(w,{icon:"eva:arrow-ios-back-fill",width:16,sx:{mr:.5}}),"بازگشت به ورود"]})]});return e.jsxs(e.Fragment,{children:[h,e.jsx(P,{methods:c,onSubmit:d,children:x})]})}const J=n.object({code:n.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:n.string().min(1,{message:"Confirm password is required!"})}).refine(s=>s.password===s.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function re(){const s=V(),c={code:"",email:"",password:"",confirmPassword:""},t=S({resolver:I(J),defaultValues:c}),{handleSubmit:m,formState:{isSubmitting:d}}=t,h=m(async i=>{try{await new Promise(b=>setTimeout(b,500)),console.info("DATA",i)}catch(b){console.error(b)}}),x=e.jsxs(e.Fragment,{children:[e.jsx(q,{sx:{mx:"auto"}}),e.jsxs(o,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(l,{variant:"h5",children:"Request sent successfully!"}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:`We've sent a 6-digit confirmation email to your email. 
Please enter the code in below box to verify your email.`})]})]}),u=e.jsxs(o,{spacing:3,children:[e.jsx(a.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(a.Code,{name:"code"}),e.jsx(a.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:s.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(A,{onClick:s.onToggle,edge:"end",children:e.jsx(w,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(a.Text,{name:"confirmPassword",label:"Confirm new password",type:s.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(A,{onClick:s.onToggle,edge:"end",children:e.jsx(w,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:d,loadingIndicator:"Update password...",children:"Update password"}),e.jsxs(l,{variant:"body2",sx:{mx:"auto"},children:["Don’t have a code? ",e.jsx(j,{variant:"subtitle2",sx:{cursor:"pointer"},children:"Resend code"})]}),e.jsxs(j,{component:y,href:g.authDemo.centered.signIn,color:"inherit",variant:"subtitle2",sx:{mx:"auto",alignItems:"center",display:"inline-flex"},children:[e.jsx(w,{icon:"eva:arrow-ios-back-fill",width:16,sx:{mr:.5}}),"Return to sign in"]})]});return e.jsxs(e.Fragment,{children:[x,e.jsx(P,{methods:t,onSubmit:h,children:u})]})}export{ee as C,se as a,_ as b,ne as c,re as d};
