import{r as m,C as v,j as e,H as ss,e as os,S as c,I as b,B as j,T as a,bc as as,A as B,bf as ee,ar as de,d as R,aE as $e,cG as C}from"./index-BSItzkt3.js";import{U as ts}from"./upload-C5NUn5Ko.js";import"./image-BuqYs7tq.js";import{A as ns}from"./advanced-cephalometric-visualizer-BadiHF3t.js";import{C as I}from"./Card-BqWDE3fr.js";import{C as O}from"./CardContent-DE24Aeed.js";import{F as rs}from"./FormControl-1z33WGqh.js";import{I as is}from"./InputLabel-DqZ4yv4U.js";import{S as ls}from"./Select-QPCMlUZ4.js";import{T as Ue}from"./TextField-DpdcsLRb.js";import{F as se}from"./FormControlLabel-CtXEP1QR.js";import{C as M}from"./Chip-CHY_XJWs.js";import{A as cs,a as ds,b as hs}from"./AccordionDetails-Df9rpRYc.js";import{S as L}from"./Slider-B4qW6LuH.js";import"./preview-multi-file-C1SdoyfF.js";import"./index-b5NUrSMh.js";import"./format-number-BVcmMM5V.js";import"./file-thumbnail-J0C6dV__.js";import"./FormHelperText-CBXzj8d7.js";import"./color-preview-CjTlM1Ll.js";import"./Menu-Cy0n4kRw.js";import"./DialogTitle-D9mOMHyE.js";import"./dialogTitleClasses-BJYaWiXv.js";import"./DialogContent-CPx_wcNJ.js";import"./ClickAwayListener-BBFqwi2L.js";import"./FormLabel-Dg62SF9b.js";import"./visuallyHidden-Dan1xhjv.js";const W=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#AED6F1","#FF8A65","#81C784","#64B5F6","#BA68C8","#4DB6AC","#FFB74D","#F48FB1","#90CAF9","#A5D6A7","#CE93D8","#FFAB91","#80CBC4","#9FA8DA","#FFE082","#EF9A9A","#B39DDB","#BCAAA4","#EEEEEE"],H=[{id:"local/hrnet-w32",name:"HRNet-W32 (Local)",provider:"Local Server",description:"â­ Ù…Ø¯Ù„ ØªØ®ØµØµÛŒ Cephalometric - Ø¯Ù‚Øª Ø¹Ø§Ù„ÛŒ (MRE 0.63mm)",color:W[0],isLocal:!0,requiresApiKey:!1},{id:"local/aariz-256",name:"Aariz 256x256 (Local)",provider:"Local Server",description:"Aariz Model 256x256 - Fast (SDR: 61.55%)",color:W[1],isLocal:!0,requiresApiKey:!1},{id:"local/aariz-512",name:"Aariz 512x512 (Local)",provider:"Local Server",description:"Aariz Model 512x512 - Balanced (SDR: 73.45%)",color:W[2],isLocal:!0,requiresApiKey:!1},{id:"local/aariz-512-tta",name:"Aariz 512x512 + TTA (Local)",provider:"Local Server",description:"â­ BEST - Aariz 512x512 with TTA (SDR: 74.83%)",color:W[3],isLocal:!0,requiresApiKey:!1},{id:"local/aariz-ensemble",name:"Aariz Ensemble (Local)",provider:"Local Server",description:"Aariz Ensemble 256+512 (SDR: 71.90%)",color:W[4],isLocal:!0,requiresApiKey:!1},{id:"local/aariz-ensemble-tta",name:"Aariz Ensemble + TTA (Local)",provider:"Local Server",description:"Aariz Ensemble 256+512 with TTA (SDR: 72.41%)",color:W[5],isLocal:!0,requiresApiKey:!1}],ms=`You are an expert in cephalometric analysis. Analyze this lateral cephalometric radiograph and identify the following anatomical landmarks with their exact pixel coordinates:

Required landmarks:
1. S (Sella) - Center of sella turcica
2. N (Nasion) - Most anterior point of frontonasal suture
3. A (Point A) - Deepest point on maxilla between ANS and prosthion
4. B (Point B) - Deepest point on mandible between infradentale and pogonion
5. Pog (Pogonion) - Most anterior point of chin
6. Go (Gonion) - Most posterior-inferior point of mandibular angle
7. Me (Menton) - Most inferior point of mandibular symphysis
8. Or (Orbitale) - Lowest point of orbital margin
9. Po (Porion) - Superior point of external auditory meatus
10. ANS (Anterior Nasal Spine) - Tip of anterior nasal spine
11. PNS (Posterior Nasal Spine) - Tip of posterior nasal spine
12. U1 (Upper Incisor) - Incisal edge of upper central incisor
13. L1 (Lower Incisor) - Incisal edge of lower central incisor

Please respond ONLY with a valid JSON object in this exact format:
{
  "landmarks": {
    "S": {"x": 0, "y": 0},
    "N": {"x": 0, "y": 0},
    "A": {"x": 0, "y": 0},
    "B": {"x": 0, "y": 0},
    "Pog": {"x": 0, "y": 0},
    "Go": {"x": 0, "y": 0},
    "Me": {"x": 0, "y": 0},
    "Or": {"x": 0, "y": 0},
    "Po": {"x": 0, "y": 0},
    "ANS": {"x": 0, "y": 0},
    "PNS": {"x": 0, "y": 0},
    "U1": {"x": 0, "y": 0},
    "L1": {"x": 0, "y": 0}
  },
  "confidence": 0.0,
  "notes": "any observations"
}

Do not include any text outside the JSON object.`;function Hs(){var Ce,Ae,Fe,Te,Ee,Le,ze;const[h,Pe]=m.useState(H[3].id),[K,Ne]=m.useState(""),[z,he]=m.useState(null),[$,me]=m.useState(null),[pe,ps]=m.useState(ms),[q,ue]=m.useState(!1),[l,J]=m.useState(null),[xe,N]=m.useState(null),[us,ge]=m.useState([]),[A,Be]=m.useState(null),[oe,Re]=m.useState(!0),[Me,fe]=m.useState(!1),[je,We]=m.useState([]),[ae,ye]=m.useState(!1),[G,He]=m.useState([]),[te,ne]=m.useState({}),[Y,Je]=m.useState(!1),[U,P]=m.useState(null),[_e,E]=m.useState(null),[be,X]=m.useState(!1),[we,xs]=m.useState("advanced"),[gs,Ke]=m.useState([]),V={soft_tissue_profile:{search_area_ratio:.4,edge_threshold_low:30,edge_threshold_high:100,smooth_sigma:2,contrast_alpha:1.5,contrast_beta:-30,max_points:200,simplify_epsilon:1.5,use_circle_fit:!1,use_ellipse_fit:!1},mandible_border:{search_area_ratio:.5,edge_threshold_low:40,edge_threshold_high:120,smooth_sigma:1.5,contrast_alpha:1.8,contrast_beta:-40,max_points:150,simplify_epsilon:2,use_circle_fit:!1,use_ellipse_fit:!1},maxilla_border:{search_area_ratio:.4,edge_threshold_low:35,edge_threshold_high:110,smooth_sigma:1.5,contrast_alpha:1.6,contrast_beta:-35,max_points:150,simplify_epsilon:2,use_circle_fit:!1,use_ellipse_fit:!1},sella_turcica:{search_area_ratio:.25,edge_threshold_low:25,edge_threshold_high:90,smooth_sigma:1,contrast_alpha:2,contrast_beta:-50,max_points:64,simplify_epsilon:2,use_circle_fit:!1,use_ellipse_fit:!0,ellipse_fit_points:48},orbital_rim:{search_area_ratio:.3,edge_threshold_low:30,edge_threshold_high:100,smooth_sigma:2,contrast_alpha:1.7,contrast_beta:-40,max_points:100,simplify_epsilon:2.5,use_circle_fit:!0,circle_fit_points:48,use_ellipse_fit:!1},upper_tooth:{search_area_ratio:.2,edge_threshold_low:40,edge_threshold_high:130,smooth_sigma:1,contrast_alpha:2.2,contrast_beta:-50,max_points:80,simplify_epsilon:1.5,use_circle_fit:!1,use_ellipse_fit:!1},lower_tooth:{search_area_ratio:.2,edge_threshold_low:40,edge_threshold_high:130,smooth_sigma:1,contrast_alpha:2.2,contrast_beta:-50,max_points:80,simplify_epsilon:1.5,use_circle_fit:!1,use_ellipse_fit:!1}};m.useEffect(()=>{if(G.length>0&&Object.keys(te).length===0){const s={};G.forEach(o=>{V[o]&&(s[o]={...V[o]})}),ne(s)}},[G]),m.useEffect(()=>{re()},[]);const ve=m.useCallback(async()=>{try{let s=null;if(h==="local/hrnet-w32"?s=`${v.hrnetServerUrl}/contour-regions`:h&&h.startsWith("local/aariz")&&(s=`${v.aiServerUrl}/contour-regions`),!s)return;const r=await(await fetch(s)).json();r.success&&(He(Object.keys(r.regions||{})),Ke(Object.keys(r.regions||{})))}catch(s){h&&(h==="local/hrnet-w32"||h.startsWith("local/aariz"))&&console.warn("âš ï¸ Contour service not available (contours disabled):",s.message)}},[h]);m.useEffect(()=>{ve()},[ve]);const re=async()=>{ye(!0);try{const o=await(await fetch(`${v.site.serverUrl||"http://localhost:7272"}/api/ai-model-tests?limit=20`)).json();o.success&&We(o.data)}catch(s){console.error("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡:",s)}finally{ye(!1)}},Se=async s=>{var o,r,t,g,u;fe(!0);try{if(!(s!=null&&s.model)){console.error("âŒ Ø®Ø·Ø§: model Ø¯Ø± testResult ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯");return}let n=null;$&&!$.startsWith("blob:")&&(n=$);const i={modelId:s.model.id||"unknown",modelName:s.model.name||"Unknown Model",modelProvider:s.model.provider||"Unknown Provider",imageUrl:n,imageSize:A?JSON.stringify(A):null,prompt:pe||"",success:s.success||!1,landmarks:s.success&&((o=s.response)!=null&&o.landmarks)?JSON.stringify(s.response.landmarks):null,rawResponse:s.rawResponse||null,error:s.error||null,processingTime:(r=s.metadata)!=null&&r.processingTime?parseFloat(s.metadata.processingTime):null,tokensUsed:(t=s.metadata)!=null&&t.tokensUsed?JSON.stringify(s.metadata.tokensUsed):null,scalingInfo:(g=s.metadata)!=null&&g.scaling?JSON.stringify(s.metadata.scaling):null,confidence:((u=s.response)==null?void 0:u.confidence)||s.confidence||null,userId:null},y=await(await fetch(`${v.site.serverUrl||"http://localhost:7272"}/api/ai-model-tests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();y.success?(console.log("âœ… ØªØ³Øª Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯:",y.data.id),await re()):console.error("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªØ³Øª:",y.error||"Unknown error")}catch(n){console.error("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªØ³Øª:",n)}finally{fe(!1)}},qe=m.useCallback(s=>{const o=s[0];if(o){he(o);const r=URL.createObjectURL(o);me(r),N(null),J(null);const t=new Image;t.onload=()=>{const g=t.naturalWidth||t.width,u=t.naturalHeight||t.height;Be({width:g,height:u}),console.log(`ğŸ“ Ø§Ø¨Ø¹Ø§Ø¯ ØªØµÙˆÛŒØ±: ${g} Ã— ${u} (natural: ${t.naturalWidth} Ã— ${t.naturalHeight}, display: ${t.width} Ã— ${t.height})`)},t.src=r}},[]),Ge=m.useCallback(()=>{he(null),me(null)},[]),ke=s=>new Promise((o,r)=>{const t=new FileReader;t.onload=()=>o(t.result),t.onerror=r,t.readAsDataURL(s)}),Ye=(s,o)=>{if(!s||!o)return 1;const r=Object.values(s).map(y=>y.x),t=Object.values(s).map(y=>y.y),g=Math.max(...r),u=Math.max(...t),n=o.width/g,i=o.height/u,d=(n+i)/2;return console.log(`ğŸ”¢ Scaling calculation:
      - Image size: ${o.width} Ã— ${o.height}
      - Landmark range: ${g.toFixed(0)} Ã— ${u.toFixed(0)}
      - Scale X: ${n.toFixed(4)}
      - Scale Y: ${i.toFixed(4)}
      - Final factor: ${d.toFixed(4)}`),d},Xe=async(s,o)=>{var r;if(!s||!o){E("Ø§Ø¨ØªØ¯Ø§ landmarks Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ù‡ÛŒØ¯");return}X(!0),E(null);try{let t=null;if(h==="local/hrnet-w32")t=`${v.hrnetServerUrl}/detect-contours`;else if(h&&h.startsWith("local/aariz"))t=`${v.aiServerUrl}/detect-contours`;else throw new Error("Contour detection only available for local models");console.log(`[Contour] Using method: ${we}`);const u=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:s,landmarks:o,method:we})});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const n=await u.json();if(console.log("ğŸ” Contour API Response:",n),n.success&&n.contours){let i={};n.contours&&typeof n.contours=="object"&&(n.contours.contours&&typeof n.contours.contours=="object"?i=n.contours.contours:(!n.contours.success&&Object.keys(n.contours).length>0,i=n.contours));const d={};if(Object.keys(i).forEach(D=>{const w=i[D];w&&typeof w=="object"&&w.contour&&Array.isArray(w.contour)&&w.contour.length>0&&(d[D]=w)}),Object.keys(d).length===0){console.warn("âš ï¸ No valid contours found in response"),E("Ù‡ÛŒÚ† Ú©Ø§Ù†ØªÙˆØ± Ù…Ø¹ØªØ¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"),P(null);return}const y={success:!0,num_regions:Object.keys(d).length,contours:d};P(y),console.log(`âœ… Contours detected: ${y.num_regions} regions`,y)}else{const i=n.error||((r=n.contours)==null?void 0:r.error)||"Contour detection failed";throw new Error(i)}}catch(t){console.error("Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ contours:",t),E(t.message||"Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ contours"),P(null)}finally{X(!1)}},Ve=async()=>{var s,o;if(!z||!(l!=null&&l.success)||!((s=l==null?void 0:l.response)!=null&&s.landmarks)){E("Ø§Ø¨ØªØ¯Ø§ landmarks Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ù‡ÛŒØ¯");return}X(!0),E(null);try{let r=null;if(h==="local/hrnet-w32")r=`${v.hrnetServerUrl}/detect-contours`;else if(h&&h.startsWith("local/aariz"))r=`${v.aiServerUrl}/detect-contours`;else throw new Error("Contour detection only available for local models");const g={image_base64:await ke(z),landmarks:l.response.landmarks,custom_configs:te},u=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const n=await u.json();if(console.log("ğŸ” Contour API Response (custom):",n),n.success&&n.contours){let i={};n.contours&&typeof n.contours=="object"&&(n.contours.contours&&typeof n.contours.contours=="object"?i=n.contours.contours:(!n.contours.success&&Object.keys(n.contours).length>0,i=n.contours));const d={};if(Object.keys(i).forEach(D=>{const w=i[D];w&&typeof w=="object"&&w.contour&&Array.isArray(w.contour)&&w.contour.length>0&&(d[D]=w)}),Object.keys(d).length===0){console.warn("âš ï¸ No valid contours found in response"),E("Ù‡ÛŒÚ† Ú©Ø§Ù†ØªÙˆØ± Ù…Ø¹ØªØ¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"),P(null);return}const y={success:!0,num_regions:Object.keys(d).length,contours:d};P(y),console.log(`âœ… Contours detected with custom settings: ${y.num_regions} regions`,y)}else{const i=n.error||((o=n.contours)==null?void 0:o.error)||"Contour detection failed";throw new Error(i)}}catch(r){console.error("Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ contours:",r),E(r.message||"Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ contours"),P(null)}finally{X(!1)}},S=(s,o,r)=>{ne(t=>({...t,[s]:{...t[s],[o]:r}}))},Qe=(s,o)=>{const r={};return Object.entries(s).forEach(([t,g])=>{r[t]={x:Math.round(g.x*o*100)/100,y:Math.round(g.y*o*100)/100}}),r},Ze=async()=>{var t,g,u,n,i,d,y,D,w,De;if(!z){N("Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© ØªØµÙˆÛŒØ± Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯");return}const s=H.find(T=>T.id===h),o=s==null?void 0:s.isLocal;if(!o&&!K){N("Ù„Ø·ÙØ§Ù‹ API Key Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}ue(!0),N(null),J(null);const r=Date.now();try{const T=await ke(z);console.log("ğŸ–¼ï¸ Image Debug Info:"),console.log("   File name:",z.name),console.log("   File size:",z.size,"bytes"),console.log("   File type:",z.type),console.log("   Frontend detected size:",A),console.log("   Base64 length:",T.length);let _,p,F,k,Q;if(o&&h==="local/hrnet-w32"){if(console.log("ğŸ¤– Using Local HRNet Service..."),_=await fetch(`${v.hrnetServerUrl}/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:T})}),Q=(Date.now()-r)/1e3,!_.ok)throw new Error(`HRNet Service Error: ${_.status}`);if(p=await _.json(),!p.success)throw new Error(p.error||"Detection failed");k={landmarks:p.landmarks,confidence:((t=p.metadata)==null?void 0:t.avg_confidence)||.9,notes:`HRNet-W32 Detection - ${((g=p.metadata)==null?void 0:g.model_type)||"mock"} mode`,measurements:p.measurements},F=JSON.stringify(k)}else if(o&&h.startsWith("local/aariz")){console.log(`ğŸ¤– Using Local Aariz Model Service (${h})...`);let f=`${v.aiServerUrl}/detect`;if(h==="local/aariz-256"?f=`${v.aiServerUrl}/detect-256`:h==="local/aariz-512"?f=`${v.aiServerUrl}/detect-512`:h==="local/aariz-512-tta"?f=`${v.aiServerUrl}/detect-512-tta`:h==="local/aariz-ensemble"?f=`${v.aiServerUrl}/detect-ensemble`:h==="local/aariz-ensemble-tta"&&(f=`${v.aiServerUrl}/detect-ensemble-tta`),_=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:T})}),Q=(Date.now()-r)/1e3,!_.ok){const le=await _.text();throw new Error(`Aariz Model Service Error: ${_.status} - ${le}`)}if(p=await _.json(),!p.success)throw new Error(p.error||"Detection failed");console.log("ğŸ“Š API Response Debug:"),console.log("   API image_size:",(u=p.metadata)==null?void 0:u.image_size),console.log("   Frontend imageSize:",A),console.log("   Sample landmark (A):",(n=p.landmarks)==null?void 0:n.A),console.log("   Model:",(i=p.metadata)==null?void 0:i.model),k={landmarks:p.landmarks,confidence:((d=p.metadata)==null?void 0:d.avg_confidence)||.9,notes:`${((y=p.metadata)==null?void 0:y.model)||"Aariz Model"} - ${((D=p.metadata)==null?void 0:D.model_architecture)||"trained"} - ${((w=p.metadata)==null?void 0:w.valid_landmarks)||0}/29 Ù„Ù†Ø¯Ù…Ø§Ø±Ú©`,metadata:{...p.metadata,frontend_image_size:A}},F=JSON.stringify(k)}else{if(console.log("ğŸŒ Using OpenRouter API..."),_=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${K}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"DentalAI - Cephalometric Analysis"},body:JSON.stringify({model:h,messages:[{role:"user",content:[{type:"text",text:pe},{type:"image_url",image_url:{url:T}}]}],max_tokens:2e3,temperature:.1})}),Q=(Date.now()-r)/1e3,!_.ok){const ce=await _.json();throw new Error(((De=ce.error)==null?void 0:De.message)||`HTTP ${_.status}: ${_.statusText}`)}p=await _.json();const{choices:Oe}=p,{message:le}=Oe[0],{content:es}=le;F=es,F.includes("```json")?F=F.split("```json")[1].split("```")[0]:F.includes("```")&&(F=F.split("```")[1].split("```")[0]);try{k=JSON.parse(F.trim())}catch(ce){k={raw:F,parseError:ce.message}}}let ie=k,Ie=null;if(console.log("ğŸ” Auto-scale check:"),console.log("   autoScale enabled:",oe),console.log("   imageSize:",A),console.log("   has landmarks:",!!k.landmarks),oe&&A&&k.landmarks){const f=Ye(k.landmarks,A);console.log("   calculated scalingFactor:",f),f>1.5||f<.5?(console.log(`âš ï¸ Auto-scaling applied: ${f.toFixed(4)}x`),ie={...k,landmarks:Qe(k.landmarks,f),original_landmarks:k.landmarks},Ie={factor:f.toFixed(4),imageSize:A,applied:!0}):console.log("   âœ… Scaling factor within normal range, no scaling applied")}else console.log("   âœ… Auto-scaling disabled or conditions not met - using original landmarks");const Z={success:!0,model:H.find(f=>f.id===h),response:ie,metadata:{processingTime:Q.toFixed(2),tokensUsed:p.usage,timestamp:new Date().toLocaleString("fa-IR"),scaling:Ie},rawResponse:F};J(Z),ge(f=>[Z,...f.slice(0,9)]),Y&&o&&(h==="local/hrnet-w32"||h.startsWith("local/aariz"))&&Z.success&&(console.log("ğŸ”„ Auto-detecting contours..."),await Xe(T,ie.landmarks||k.landmarks)),await Se(Z)}catch(T){console.error("Test error:",T),N(T.message||"Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª Ù…Ø¯Ù„");const _={success:!1,model:H.find(p=>p.id===h),error:T.message,metadata:{timestamp:new Date().toLocaleString("fa-IR")}};ge(p=>[_,...p.slice(0,9)]),await Se(_)}finally{ue(!1)}},x=H.find(s=>s.id===h);return e.jsxs(e.Fragment,{children:[e.jsx(ss,{children:e.jsx("title",{children:"ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ AI | DentalAI"})}),e.jsx(os,{maxWidth:"xl",children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(b,{icon:"carbon:ai-status",width:40}),e.jsxs(j,{children:[e.jsx(a,{variant:"h4",children:"ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ AI"}),e.jsx(a,{variant:"body2",sx:{color:"text.secondary"},children:"Ø¢Ø²Ù…Ø§ÛŒØ´ Ùˆ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Cephalometric Landmarks"})]})]}),e.jsxs(c,{direction:{xs:"column",md:"row"},spacing:3,children:[e.jsxs(c,{spacing:3,sx:{width:{xs:"100%",md:"400px"}},children:[e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsx(a,{variant:"h6",children:"âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª"}),e.jsxs(rs,{fullWidth:!0,children:[e.jsx(is,{children:"Ù…Ø¯Ù„ AI"}),e.jsx(ls,{value:h,label:"Ù…Ø¯Ù„ AI",onChange:s=>Pe(s.target.value),children:H.map(s=>e.jsx(as,{value:s.id,children:e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",sx:{width:"100%"},children:[e.jsx(j,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:s.color}}),e.jsxs(j,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",children:s.name}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:s.provider})]})]})},s.id))})]}),x&&e.jsxs(B,{severity:x.isLocal?"success":"info",icon:e.jsx(b,{icon:x.isLocal?"carbon:checkmark-filled":"carbon:information"}),sx:{display:"none"},children:[x.description,x.isLocal&&e.jsxs(a,{variant:"caption",component:"div",sx:{mt:1},children:["ğŸ’¡ Ø§ÛŒÙ† Ù…Ø¯Ù„ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ù…Ø­Ù„ÛŒ Ø´Ù…Ø§ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ API Key Ù†ÛŒØ³Øª!",e.jsx("br",{}),"ğŸ”— Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø­Ø§ØµÙ„ Ú©Ù†ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª."]})]}),!(x!=null&&x.isLocal)&&e.jsx(Ue,{fullWidth:!0,type:"password",label:"OpenRouter API Key",value:K,onChange:s=>Ne(s.target.value),placeholder:"sk-or-v1-...",helperText:e.jsxs(c,{direction:"row",spacing:.5,component:"span",children:[e.jsx("span",{children:"Ø¯Ø±ÛŒØ§ÙØª Ø§Ø²"}),e.jsx(j,{component:"a",href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none"},children:"openrouter.ai/keys"})]})}),e.jsx(se,{control:e.jsx(ee,{checked:oe,onChange:s=>Re(s.target.checked),color:"primary"}),label:e.jsxs(c,{children:[e.jsx(a,{variant:"body2",children:"ØªØµØ­ÛŒØ­ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ù‚ÛŒØ§Ø³"}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:"Ø§ØµÙ„Ø§Ø­ Ù…Ø®ØªØµØ§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø¨Ø¹Ø§Ø¯ ØªØµÙˆÛŒØ±"})]}),sx:{display:"none"}}),(x==null?void 0:x.isLocal)&&(h==="local/hrnet-w32"||h.startsWith("local/aariz"))&&e.jsxs(e.Fragment,{children:[e.jsx(de,{sx:{display:"none"}}),e.jsx(se,{control:e.jsx(ee,{checked:Y,onChange:s=>{Je(s.target.checked),s.target.checked||(P(null),E(null))},color:"primary"}),label:e.jsxs(c,{children:[e.jsx(a,{variant:"body2",children:"ğŸ¨ ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø¯ÙˆØ¯ (Contours)"}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:"ØªØ´Ø®ÛŒØµ Ø­Ø¯ÙˆØ¯ Ø¨Ø§ÙØª Ù†Ø±Ù…ØŒ Ø§Ø³ØªØ®ÙˆØ§Ù†â€ŒÙ‡Ø§ Ùˆ Ø¯Ù†Ø¯Ø§Ù†â€ŒÙ‡Ø§"})]}),sx:{display:"none"}})]}),A&&e.jsx(B,{severity:"info",icon:e.jsx(b,{icon:"carbon:ruler"}),children:e.jsxs(a,{variant:"caption",children:["Ø§Ø¨Ø¹Ø§Ø¯ ØªØµÙˆÛŒØ±: ",A.width," Ã— ",A.height," Ù¾ÛŒÚ©Ø³Ù„"]})}),e.jsx(de,{}),e.jsx(a,{variant:"h6",children:"ğŸ“· Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ±"}),e.jsx(ts,{file:z,onDrop:qe,onDelete:Ge,accept:{"image/*":[]}}),$&&e.jsx(j,{component:"img",src:$,sx:{width:"100%",height:200,objectFit:"contain",borderRadius:1,bgcolor:"background.neutral"}})]})})}),e.jsx(R,{fullWidth:!0,size:"large",variant:"contained",color:"primary",onClick:Ze,disabled:q||!z||!(x!=null&&x.isLocal)&&!K,startIcon:q?e.jsx(b,{icon:"line-md:loading-loop"}):e.jsx(b,{icon:"carbon:play-filled"}),children:q?"Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª...":"Ø´Ø±ÙˆØ¹ ØªØ³Øª"})]}),e.jsxs(c,{spacing:3,sx:{flex:1},children:[q&&e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",children:[e.jsx(a,{variant:"h6",children:"â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´..."}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:x==null?void 0:x.name})]}),e.jsx($e,{})]})})}),xe&&e.jsxs(B,{severity:"error",onClose:()=>N(null),children:[e.jsx(a,{variant:"subtitle2",children:"Ø®Ø·Ø§"}),e.jsx(a,{variant:"body2",children:xe})]}),Y&&(x==null?void 0:x.isLocal)&&(h==="local/hrnet-w32"||h.startsWith("local/aariz"))&&e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{children:[e.jsx(a,{variant:"h6",children:"ğŸ¨ ØªØ´Ø®ÛŒØµ Ø­Ø¯ÙˆØ¯"}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:"Ø±ÙˆØ´: RyanChoi Advanced (Ù¾ÛŒØ´Ø±ÙØªÙ‡)"})]}),be&&e.jsx(M,{icon:e.jsx(b,{icon:"line-md:loading-loop"}),label:"Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ø®ÛŒØµ...",color:"info",size:"small"})]}),_e&&e.jsx(B,{severity:"error",onClose:()=>E(null),children:e.jsx(a,{variant:"body2",children:_e})}),U&&U.success&&e.jsxs(B,{severity:"success",children:[e.jsxs(a,{variant:"body2",children:["âœ… ",U.num_regions," Ù†Ø§Ø­ÛŒÙ‡ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯"]}),e.jsx(c,{direction:"row",spacing:1,sx:{mt:1,flexWrap:"wrap",gap:.5},children:Object.entries(U.contours).map(([s,o])=>e.jsx(M,{label:`${s.replace(/_/g," ")}: ${o.success?`${o.num_points||0} Ù†Ù‚Ø§Ø·`:"Ù†Ø§Ù…ÙˆÙÙ‚"}`,color:o.success?"success":"error",size:"small",variant:"outlined"},s))})]})]})})}),Y&&(x==null?void 0:x.isLocal)&&(h==="local/hrnet-w32"||h.startsWith("local/aariz"))&&(l==null?void 0:l.success)&&e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(a,{variant:"h6",children:"âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÙØ§Ø±Ø´ÛŒ Ú©Ø§Ù†ØªÙˆØ±Ù‡Ø§"}),e.jsx(R,{variant:"contained",color:"primary",size:"small",onClick:Ve,disabled:be,startIcon:e.jsx(b,{icon:"carbon:play-filled"}),children:"Ø±Ø³Ù… Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ø¯ÛŒØ¯"})]}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‡Ø± Ù†Ø§Ø­ÛŒÙ‡ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ Ùˆ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ù„Ø§ Ù†ØªÛŒØ¬Ù‡ Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯"}),G.map(s=>{var t,g,u,n;const o=te[s]||{},r=s.replace(/_/g," ");return e.jsxs(cs,{children:[e.jsx(ds,{expandIcon:e.jsx(b,{icon:"carbon:chevron-down"}),children:e.jsx(a,{variant:"subtitle2",children:r})}),e.jsx(hs,{children:e.jsxs(c,{spacing:2,children:[e.jsxs(j,{children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Search Area Ratio: ",((t=o.search_area_ratio)==null?void 0:t.toFixed(2))||0]}),e.jsx(L,{value:o.search_area_ratio||.3,min:.1,max:1,step:.05,onChange:(i,d)=>S(s,"search_area_ratio",d),marks:[{value:.1,label:"0.1"},{value:.5,label:"0.5"},{value:1,label:"1.0"}]})]}),e.jsxs(c,{direction:"row",spacing:2,children:[e.jsxs(j,{sx:{flex:1},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Edge Low: ",o.edge_threshold_low||30]}),e.jsx(L,{value:o.edge_threshold_low||30,min:10,max:100,step:5,onChange:(i,d)=>S(s,"edge_threshold_low",d)})]}),e.jsxs(j,{sx:{flex:1},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Edge High: ",o.edge_threshold_high||100]}),e.jsx(L,{value:o.edge_threshold_high||100,min:50,max:200,step:5,onChange:(i,d)=>S(s,"edge_threshold_high",d)})]})]}),e.jsxs(j,{children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Smooth Sigma: ",((g=o.smooth_sigma)==null?void 0:g.toFixed(1))||1]}),e.jsx(L,{value:o.smooth_sigma||1,min:.5,max:5,step:.1,onChange:(i,d)=>S(s,"smooth_sigma",d)})]}),e.jsxs(c,{direction:"row",spacing:2,children:[e.jsxs(j,{sx:{flex:1},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Contrast Alpha: ",((u=o.contrast_alpha)==null?void 0:u.toFixed(1))||1.5]}),e.jsx(L,{value:o.contrast_alpha||1.5,min:.5,max:3,step:.1,onChange:(i,d)=>S(s,"contrast_alpha",d)})]}),e.jsxs(j,{sx:{flex:1},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Contrast Beta: ",o.contrast_beta||-30]}),e.jsx(L,{value:o.contrast_beta||-30,min:-100,max:100,step:5,onChange:(i,d)=>S(s,"contrast_beta",d)})]})]}),e.jsxs(j,{children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Max Points: ",o.max_points||100]}),e.jsx(L,{value:o.max_points||100,min:20,max:500,step:10,onChange:(i,d)=>S(s,"max_points",d)})]}),e.jsxs(j,{children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Simplify Epsilon: ",((n=o.simplify_epsilon)==null?void 0:n.toFixed(1))||1.5]}),e.jsx(L,{value:o.simplify_epsilon||1.5,min:.5,max:5,step:.1,onChange:(i,d)=>S(s,"simplify_epsilon",d)})]}),e.jsxs(c,{spacing:1,children:[e.jsx(se,{control:e.jsx(ee,{checked:o.use_circle_fit||!1,onChange:i=>{S(s,"use_circle_fit",i.target.checked),i.target.checked&&S(s,"use_ellipse_fit",!1)},size:"small"}),label:"Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Circle Fit"}),o.use_circle_fit&&e.jsxs(j,{sx:{pl:4},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Circle Points: ",o.circle_fit_points||32]}),e.jsx(L,{value:o.circle_fit_points||32,min:16,max:128,step:4,onChange:(i,d)=>S(s,"circle_fit_points",d)})]}),e.jsx(se,{control:e.jsx(ee,{checked:o.use_ellipse_fit||!1,onChange:i=>{S(s,"use_ellipse_fit",i.target.checked),i.target.checked&&S(s,"use_circle_fit",!1)},size:"small"}),label:"Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ellipse Fit"}),o.use_ellipse_fit&&e.jsxs(j,{sx:{pl:4},children:[e.jsxs(a,{variant:"caption",sx:{mb:1,display:"block"},children:["Ellipse Points: ",o.ellipse_fit_points||48]}),e.jsx(L,{value:o.ellipse_fit_points||48,min:24,max:128,step:4,onChange:(i,d)=>S(s,"ellipse_fit_points",d)})]})]}),e.jsx(R,{size:"small",variant:"outlined",onClick:()=>{V[s]&&ne(i=>({...i,[s]:{...V[s]}}))},startIcon:e.jsx(b,{icon:"carbon:reset"}),children:"Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¨Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶"})]})})]},s)})]})})}),l&&l.success&&((Ce=l.response)==null?void 0:Ce.landmarks)&&$&&e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsx(a,{variant:"h6",children:"ğŸ“Š Ù†Ù…Ø§ÛŒØ´ Ø¨ØµØ±ÛŒ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Landmarks"}),e.jsx(ns,{imageUrl:$,landmarks:l.response.landmarks,imageSize:A,contours:(U==null?void 0:U.contours)||null,onLandmarksChange:s=>{J({...l,response:{...l.response,landmarks:s}})},showMeasurements:!0})]})})}),l&&e.jsx(I,{sx:{bgcolor:l.success?C("#00FF00",.05):C("#FF0000",.05),border:`1px solid ${l.success?C("#00FF00",.2):C("#FF0000",.2)}`},children:e.jsx(O,{children:e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(a,{variant:"h6",children:l.success?"âœ… Ù†ØªÛŒØ¬Ù‡":"âŒ Ø®Ø·Ø§"}),e.jsxs(c,{direction:"row",spacing:1,children:[((Ae=l.metadata)==null?void 0:Ae.processingTime)&&e.jsxs(a,{variant:"caption",sx:{color:"text.secondary"},children:["â±ï¸ ",l.metadata.processingTime,"s"]}),((Te=(Fe=l.metadata)==null?void 0:Fe.scaling)==null?void 0:Te.applied)&&e.jsx(M,{size:"small",label:`Scaled ${l.metadata.scaling.factor}x`,color:"success",variant:"outlined"})]})]}),l.success&&e.jsxs(c,{spacing:1,children:[((Ee=l.metadata)==null?void 0:Ee.tokensUsed)&&e.jsxs(c,{direction:"row",spacing:2,children:[e.jsxs(a,{variant:"caption",children:["ğŸ“Š Tokens: ",l.metadata.tokensUsed.total_tokens||"N/A"]}),l.metadata.tokensUsed.prompt_tokens&&e.jsxs(a,{variant:"caption",children:["Prompt: ",l.metadata.tokensUsed.prompt_tokens]}),l.metadata.tokensUsed.completion_tokens&&e.jsxs(a,{variant:"caption",children:["Completion: ",l.metadata.tokensUsed.completion_tokens]})]}),((ze=(Le=l.metadata)==null?void 0:Le.scaling)==null?void 0:ze.applied)&&e.jsx(B,{severity:"success",sx:{py:.5},children:e.jsxs(a,{variant:"caption",children:["ğŸ”§ Ù…Ù‚ÛŒØ§Ø³ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯: Ø¶Ø±ÛŒØ¨ ",l.metadata.scaling.factor," ","(ØªØµÙˆÛŒØ± ",l.metadata.scaling.imageSize.width,"Ã—",l.metadata.scaling.imageSize.height,")"]})})]}),e.jsx(Ue,{fullWidth:!0,multiline:!0,rows:20,value:JSON.stringify(l.success?l.response:{error:l.error},null,2),InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.875rem",bgcolor:"background.neutral"}}}),e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(R,{size:"small",variant:"outlined",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(l.response,null,2))},startIcon:e.jsx(b,{icon:"solar:copy-bold"}),children:"Ú©Ù¾ÛŒ JSON"}),e.jsx(R,{size:"small",variant:"outlined",onClick:()=>{const s=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=`test-result-${Date.now()}.json`,r.click()},startIcon:e.jsx(b,{icon:"solar:download-bold"}),children:"Ø¯Ø§Ù†Ù„ÙˆØ¯"})]})]})})})]})]}),e.jsx(I,{children:e.jsx(O,{children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(b,{icon:"solar:history-bold",width:32}),e.jsxs(j,{children:[e.jsx(a,{variant:"h5",children:"ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¢Ù†Ø§Ù„ÛŒØ²Ù‡Ø§"}),e.jsx(a,{variant:"body2",sx:{color:"text.secondary",mt:.5},children:"ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯"})]})]}),e.jsxs(c,{direction:"row",spacing:1,children:[Me&&e.jsx(M,{icon:e.jsx(b,{icon:"solar:diskette-bold",width:16}),label:"Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...",color:"info",size:"small"}),e.jsx(R,{variant:"outlined",size:"small",onClick:re,disabled:ae,startIcon:e.jsx(b,{icon:"solar:refresh-bold"}),children:ae?"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...":"Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"})]})]}),e.jsx(de,{}),ae?e.jsxs(j,{sx:{py:4},children:[e.jsx($e,{}),e.jsx(a,{variant:"body2",sx:{textAlign:"center",mt:2,color:"text.secondary"},children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡..."})]}):je.length===0?e.jsxs(j,{sx:{py:6,textAlign:"center"},children:[e.jsx(b,{icon:"solar:history-bold",width:64,sx:{color:"text.disabled",mb:2}}),e.jsx(a,{variant:"body1",sx:{color:"text.secondary",mb:1},children:"Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ø¢Ù†Ø§Ù„ÛŒØ²ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª"}),e.jsx(a,{variant:"caption",sx:{color:"text.disabled"},children:"Ù¾Ø³ Ø§Ø² Ø§Ù†Ø¬Ø§Ù… Ø§ÙˆÙ„ÛŒÙ† ØªØ³ØªØŒ Ù†ØªØ§ÛŒØ¬ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯"})]}):e.jsx(c,{spacing:1.5,children:je.map(s=>{let o=null;try{o=s.landmarks?typeof s.landmarks=="string"?JSON.parse(s.landmarks):s.landmarks:null}catch(t){console.error("Ø®Ø·Ø§ Ø¯Ø± parse Ú©Ø±Ø¯Ù† landmarks:",t),o=null}const r=o?Object.keys(o).length:0;return e.jsx(I,{sx:{cursor:"pointer",transition:"all 0.2s",border:`1px solid ${s.success?C("#10B981",.3):C("#EF4444",.3)}`,bgcolor:s.success?C("#10B981",.02):C("#EF4444",.02),"&:hover":{bgcolor:s.success?C("#10B981",.05):C("#EF4444",.05),border:`1px solid ${s.success?C("#10B981",.5):C("#EF4444",.5)}`,boxShadow:2}},onClick:()=>{var t;s.success&&o&&(J({success:!0,model:{id:s.modelId,name:s.modelName,provider:s.modelProvider},response:{landmarks:o},metadata:{processingTime:(t=s.processingTime)==null?void 0:t.toFixed(2),timestamp:new Date(s.createdAt).toLocaleString("fa-IR")},rawResponse:s.rawResponse}),window.scrollTo({top:0,behavior:"smooth"}))},children:e.jsx(O,{sx:{p:2.5},children:e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},children:[e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",sx:{flex:1},children:[e.jsx(j,{sx:{width:40,height:40,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:s.success?C("#10B981",.1):C("#EF4444",.1)},children:e.jsx(b,{icon:s.success?"solar:check-circle-bold":"solar:close-circle-bold",width:24,sx:{color:s.success?"#10B981":"#EF4444"}})}),e.jsxs(c,{spacing:.5,sx:{flex:1},children:[e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:s.modelName}),e.jsx(M,{label:s.modelProvider,size:"small",variant:"outlined",sx:{height:20,fontSize:"0.7rem"}})]}),e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",sx:{flexWrap:"wrap",gap:1},children:[s.success&&r>0&&e.jsxs(a,{variant:"caption",sx:{color:"text.secondary"},children:[r," Ù„Ù†Ø¯Ù…Ø§Ø±Ú© ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡"]}),s.processingTime&&e.jsxs(a,{variant:"caption",sx:{color:"text.secondary"},children:["â±ï¸ ",parseFloat(s.processingTime).toFixed(2)," Ø«Ø§Ù†ÛŒÙ‡"]}),s.confidence&&e.jsx(M,{size:"small",label:`Ø§Ø¹ØªÙ…Ø§Ø¯: ${Math.round(s.confidence*100)}%`,color:"success",variant:"outlined",sx:{height:20}}),s.error&&e.jsxs(a,{variant:"caption",sx:{color:"error.main"},children:[s.error.substring(0,50),"..."]})]})]})]}),e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(a,{variant:"caption",sx:{color:"text.secondary",whiteSpace:"nowrap"},children:new Date(s.createdAt).toLocaleString("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),s.success&&e.jsx(b,{icon:"solar:arrow-left-bold",width:20,sx:{color:"text.secondary"}})]})]})})},s.id)})})]})})})]})})]})}export{Hs as default};
