import{di as f,dy as u,r as E,dh as t}from"./index-BH9ijvcg.js";import{u as p,m as l}from"./index-BUoyIWvZ.js";const d=!0,o=f.calendar,w={revalidateIfStale:d,revalidateOnFocus:d,revalidateOnReconnect:d};function g(){const{data:e,isLoading:i,error:s,isValidating:n}=p(o,u,w);return E.useMemo(()=>({events:(e==null?void 0:e.events.map(c=>({...c,textColor:c.color})))||[],eventsLoading:i,eventsError:s,eventsValidating:n,eventsEmpty:!i&&!(e!=null&&e.events.length)}),[e==null?void 0:e.events,s,i,n])}async function I(e){{const i={title:e.title,start:e.start,end:e.end,allDay:e.allDay||!1,description:e.description||"",color:e.color||"#00a76f",...e.id&&{id:e.id}};if(!i.title||!i.start||!i.end)throw new Error("Title, start, and end are required");await t.post(o,i)}l(o,i=>{const n=[...i==null?void 0:i.events,e];return{...i,events:n}},!1)}async function S(e){{if(!(e!=null&&e.id))throw console.error("updateEvent called without id:",e),new Error("Event ID is required");const s={id:String(e.id)};if(e.title!==void 0&&(s.title=e.title),e.start!==void 0&&(s.start=e.start),e.end!==void 0&&(s.end=e.end),e.allDay!==void 0&&(s.allDay=e.allDay),e.description!==void 0&&(s.description=e.description),e.color!==void 0&&(s.color=e.color),s.title!==void 0&&!s.title)throw new Error("Title cannot be empty");if(s.start!==void 0&&!s.start)throw new Error("Start date is required");if(s.end!==void 0&&!s.end)throw new Error("End date is required");console.log("Updating event with data:",s),await t.put(o,s)}l(o,i=>{const n=(i==null?void 0:i.events).map(r=>r.id===e.id?{...r,...e}:r);return{...i,events:n}},!1)}async function q(e){{const i={eventId:e};await t.patch(o,i)}l(o,i=>{const n=(i==null?void 0:i.events).filter(r=>r.id!==e);return{...i,events:n}},!1)}export{g as a,I as c,q as d,S as u};
