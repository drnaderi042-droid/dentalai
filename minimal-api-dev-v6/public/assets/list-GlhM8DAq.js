import{b9 as J,dr as M,r as n,j as e,bc as m,v as x,dl as Q,bb as X,I as h,eG as R,S as C,aB as Y,aK as Z,B as g,L as ee,aL as te,em as oe,aE as se,dd as le,k as re,h as ie,dA as P,p as b,e5 as ne,d as k,R as ae,eH as N,H as ce,C as de}from"./index-BSItzkt3.js";import"./product-review-new-form-Db6qDTLW.js";import"./index-WR0nwbrK.js";import"./image-BuqYs7tq.js";import"./color-preview-CjTlM1Ll.js";import{a as ue}from"./product-rQxC5WYD.js";import{E as T}from"./empty-content-Cx4hswZg.js";import{C as pe}from"./confirm-dialog-DqS9qtsb.js";import{C as he}from"./custom-breadcrumbs-u_kfWYpE.js";import{F as D}from"./FormControl-1z33WGqh.js";import{I}from"./InputLabel-DqZ4yv4U.js";import{S as F,O as E}from"./Select-QPCMlUZ4.js";import{C as O}from"./Checkbox-p5PKnry8.js";import{F as me,a as L,c as G}from"./filters-result-CMxzGTKR.js";import{C as A}from"./Chip-CHY_XJWs.js";import{b as be}from"./format-number-BVcmMM5V.js";import{C as xe}from"./Card-BqWDE3fr.js";import{D as Ce,g as fe,G as je,a as ge,b as ke,c as we,d as ye,e as j}from"./DataGrid-DTzxtCf7.js";import"./form-provider-IFaCVrX4.js";import"./editor-cOR4tKCy.js";import"./incrementer-button-BZfFHMvk.js";import"./carousel-progress-bar-DAhF5Y95.js";import"./html-to-markdown-CuRjBHl-.js";import"./zod-BOXuI70n.js";import"./schema-helper-DeS_g_Vm.js";import"./CardHeader-CavtfEuu.js";import"./FormControlLabel-CtXEP1QR.js";import"./LoadingButton-HyVDRRh6.js";import"./DialogTitle-D9mOMHyE.js";import"./dialogTitleClasses-BJYaWiXv.js";import"./DialogContent-CPx_wcNJ.js";import"./FormLabel-Dg62SF9b.js";import"./Menu-Cy0n4kRw.js";import"./ListItemIcon-BgqmI6Kp.js";import"./TextField-DpdcsLRb.js";import"./FormHelperText-CBXzj8d7.js";import"./index-b5NUrSMh.js";import"./Autocomplete-B4c-hVbi.js";import"./ClickAwayListener-BBFqwi2L.js";import"./TablePagination-BVQvXhS8.js";import"./LastPage-DHcM-itg.js";import"./TableCell-B7TbLBfh.js";import"./Skeleton-CVH0eaWu.js";import"./Rating-LRaLudfA.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-B4qW6LuH.js";import"./RadioGroup-DuXlXr3g.js";import"./FormGroup-DIAu_15X.js";import"./countries-DSLisFCy.js";import"./country-select-B4qFdROS.js";import"./upload-C5NUn5Ko.js";import"./preview-multi-file-C1SdoyfF.js";import"./file-thumbnail-J0C6dV__.js";import"./upload-avatar-DTAGrxFf.js";import"./avatar-url-S8pB8DFh.js";import"./DatePicker-BK0jorBV.js";import"./ListItem-Doeuyi4X.js";import"./MobileDateTimePicker-Baldv5MM.js";import"./index-DC_o48Ax.js";function ve({filters:t,options:a}){const i=J(),l=M({stock:t.state.stock,publish:t.state.publish}),c=n.useCallback(o=>{const{target:{value:d}}=o;l.setState({stock:typeof d=="string"?d.split(","):d})},[l]),r=n.useCallback(o=>{const{target:{value:d}}=o;l.setState({publish:typeof d=="string"?d.split(","):d})},[l]),p=n.useCallback(()=>{t.setState({stock:l.state.stock})},[t,l.state.stock]),u=n.useCallback(()=>{t.setState({publish:l.state.publish})},[t,l.state.publish]);return e.jsxs(e.Fragment,{children:[e.jsxs(D,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(I,{htmlFor:"product-filter-stock-select-label",children:"Stock"}),e.jsxs(F,{multiple:!0,value:l.state.stock,onChange:c,onClose:p,input:e.jsx(E,{label:"Stock"}),renderValue:o=>o.map(d=>d).join(", "),inputProps:{id:"product-filter-stock-select-label"},sx:{textTransform:"capitalize"},children:[a.stocks.map(o=>e.jsxs(m,{value:o.value,children:[e.jsx(O,{disableRipple:!0,size:"small",checked:l.state.stock.includes(o.value)}),o.label]},o.value)),e.jsx(m,{onClick:p,sx:{justifyContent:"center",fontWeight:o=>o.typography.button,border:o=>`solid 1px ${x(o.vars.palette.grey["500Channel"],.16)}`,bgcolor:o=>x(o.vars.palette.grey["500Channel"],.08)},children:"Apply"})]})]}),e.jsxs(D,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(I,{htmlFor:"product-filter-publish-select-label",children:"Publish"}),e.jsxs(F,{multiple:!0,value:l.state.publish,onChange:r,onClose:u,input:e.jsx(E,{label:"Publish"}),renderValue:o=>o.map(d=>d).join(", "),inputProps:{id:"product-filter-publish-select-label"},sx:{textTransform:"capitalize"},children:[a.publishs.map(o=>e.jsxs(m,{value:o.value,children:[e.jsx(O,{disableRipple:!0,size:"small",checked:l.state.publish.includes(o.value)}),o.label]},o.value)),e.jsx(m,{disableGutters:!0,disableTouchRipple:!0,onClick:u,sx:{justifyContent:"center",fontWeight:o=>o.typography.button,border:o=>`solid 1px ${x(o.vars.palette.grey["500Channel"],.16)}`,bgcolor:o=>x(o.vars.palette.grey["500Channel"],.08)},children:"Apply"})]})]}),e.jsx(Q,{open:i.open,anchorEl:i.anchorEl,onClose:i.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(X,{children:[e.jsxs(m,{onClick:()=>{i.onClose()},children:[e.jsx(h,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(m,{onClick:()=>{i.onClose()},children:[e.jsx(h,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(m,{onClick:()=>{i.onClose()},children:[e.jsx(h,{icon:"solar:export-bold"}),"Export"]})]})})]})}function Se({filters:t,totalResults:a,sx:i}){const l=n.useCallback(r=>{const p=t.state.stock.filter(u=>u!==r);t.setState({stock:p})},[t]),c=n.useCallback(r=>{const p=t.state.publish.filter(u=>u!==r);t.setState({publish:p})},[t]);return e.jsxs(me,{totalResults:a,onReset:t.onResetState,sx:i,children:[e.jsx(L,{label:"Stock:",isShow:!!t.state.stock.length,children:t.state.stock.map(r=>n.createElement(A,{...G,key:r,label:R(r),onDelete:()=>l(r)}))}),e.jsx(L,{label:"Publish:",isShow:!!t.state.publish.length,children:t.state.publish.map(r=>n.createElement(A,{...G,key:r,label:R(r),onDelete:()=>c(r)}))})]})}function Re({params:t}){return be(t.row.price)}function Pe({params:t}){return e.jsx(le,{variant:"soft",color:t.row.publish==="published"&&"info"||"default",children:t.row.publish})}function Te({params:t}){return e.jsxs(C,{spacing:.5,children:[e.jsx(g,{component:"span",children:te(t.row.createdAt)}),e.jsx(g,{component:"span",sx:{typography:"caption",color:"text.secondary"},children:oe(t.row.createdAt)})]})}function De({params:t}){return e.jsxs(C,{justifyContent:"center",sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(se,{value:t.row.available*100/t.row.quantity,variant:"determinate",color:t.row.inventoryType==="out of stock"&&"error"||t.row.inventoryType==="low stock"&&"warning"||"success",sx:{mb:1,width:1,height:6,maxWidth:80}}),!!t.row.available&&t.row.available," ",t.row.inventoryType]})}function Ie({params:t,onViewRow:a}){return e.jsxs(C,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(Y,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(Z,{disableTypography:!0,primary:e.jsx(ee,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:a,sx:{cursor:"pointer"},children:t.row.name}),secondary:e.jsx(g,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:t.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const B=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Fe={category:!1},Ee=["category","actions"];function Oe(){const t=re(),a=ie(),{products:i,productsLoading:l}=ue(),c=M({publish:[],stock:[]}),[r,p]=n.useState([]),[u,o]=n.useState([]),[d,w]=n.useState(null),[V,z]=n.useState(Fe);n.useEffect(()=>{i.length&&p(i)},[i]);const H=c.state.publish.length>0||c.state.stock.length>0,y=Ge({inputData:r,filters:c.state}),_=n.useCallback(s=>{const f=r.filter(q=>q.id!==s);P.success("Delete success!"),p(f)},[r]),U=n.useCallback(()=>{const s=r.filter(f=>!u.includes(f.id));P.success("Delete success!"),p(s)},[u,r]),W=n.useCallback(s=>{a.push(b.dashboard.product.edit(s))},[a]),v=n.useCallback(s=>{a.push(b.dashboard.product.details(s))},[a]),$=n.useCallback(()=>e.jsx(Le,{filters:c,canReset:H,selectedRowIds:u,setFilterButtonEl:w,filteredResults:y.length,onOpenConfirmDeleteRows:t.onTrue}),[c.state,u]),S=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:s=>e.jsx(Ie,{params:s,onViewRow:()=>v(s.row.id)})},{field:"createdAt",headerName:"Create at",width:160,renderCell:s=>e.jsx(Te,{params:s})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:N,renderCell:s=>e.jsx(De,{params:s})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:s=>e.jsx(Re,{params:s})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:B,renderCell:s=>e.jsx(Pe,{params:s})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:s=>[e.jsx(j,{showInMenu:!0,icon:e.jsx(h,{icon:"solar:eye-bold"}),label:"View",onClick:()=>v(s.row.id)}),e.jsx(j,{showInMenu:!0,icon:e.jsx(h,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>W(s.row.id)}),e.jsx(j,{showInMenu:!0,icon:e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{_(s.row.id)},sx:{color:"error.main"}})]}],K=()=>S.filter(s=>!Ee.includes(s.field)).map(s=>s.field);return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(he,{heading:"List",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Product",href:b.dashboard.product.root},{name:"List"}],action:e.jsx(k,{component:ae,href:b.dashboard.product.new,variant:"contained",startIcon:e.jsx(h,{icon:"mingcute:add-line"}),children:"New product"}),sx:{mb:{xs:3,md:5}}}),e.jsx(xe,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(Ce,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:y,columns:S,loading:l,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:s=>o(s),columnVisibilityModel:V,onColumnVisibilityModelChange:s=>z(s),slots:{toolbar:$,noRowsOverlay:()=>e.jsx(T,{}),noResultsOverlay:()=>e.jsx(T,{title:"No results found"})},slotProps:{panel:{anchorEl:d},toolbar:{setFilterButtonEl:w},columnsManagement:{getTogglableColumns:K}},sx:{[`& .${fe.cell}`]:{alignItems:"center",display:"inline-flex"}}})})]}),e.jsx(pe,{open:t.value,onClose:t.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",u.length," "]})," items?"]}),action:e.jsx(k,{variant:"contained",color:"error",onClick:()=>{U(),t.onFalse()},children:"Delete"})})]})}function Le({filters:t,canReset:a,selectedRowIds:i,filteredResults:l,setFilterButtonEl:c,onOpenConfirmDeleteRows:r}){return e.jsxs(e.Fragment,{children:[e.jsxs(je,{children:[e.jsx(ve,{filters:t,options:{stocks:N,publishs:B}}),e.jsx(ge,{}),e.jsxs(C,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!i.length&&e.jsxs(k,{size:"small",color:"error",startIcon:e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),onClick:r,children:["Delete (",i.length,")"]}),e.jsx(ke,{}),e.jsx(we,{ref:c}),e.jsx(ye,{})]})]}),a&&e.jsx(Se,{filters:t,totalResults:l,sx:{p:2.5,pt:0}})]})}function Ge({inputData:t,filters:a}){const{stock:i,publish:l}=a;return i.length&&(t=t.filter(c=>i.includes(c.inventoryType))),l.length&&(t=t.filter(c=>l.includes(c.publish))),t}const Ae={title:`Product list | Dashboard - ${de.site.name}`};function Ht(){return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:e.jsxs("title",{children:[" ",Ae.title]})}),e.jsx(Oe,{})]})}export{Ht as default};
