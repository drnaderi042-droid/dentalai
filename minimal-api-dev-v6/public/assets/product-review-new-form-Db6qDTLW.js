import{h as W,r as o,dz as I,dA as H,p as $,j as e,ar as f,S as t,B as S,dB as Q,dC as Y,dD as J,T,dt as K,n as k,bf as R,cI as Z,d as X}from"./index-BSItzkt3.js";import{t as c,z as a}from"./zod-BOXuI70n.js";import{u as q,F as i,a as E}from"./form-provider-IFaCVrX4.js";import"./image-BuqYs7tq.js";import"./editor-cOR4tKCy.js";import{s as O}from"./schema-helper-DeS_g_Vm.js";import{C as D}from"./Card-BqWDE3fr.js";import{C as L}from"./CardHeader-CavtfEuu.js";import{C as u}from"./Chip-CHY_XJWs.js";import{F as A}from"./FormControlLabel-CtXEP1QR.js";import{L as N}from"./LoadingButton-HyVDRRh6.js";import{D as P}from"./DialogTitle-D9mOMHyE.js";import{D as ee}from"./DialogContent-CPx_wcNJ.js";import{D as se}from"./dialogTitleClasses-BJYaWiXv.js";const ae=a.object({name:a.string().min(1,{message:"Name is required!"}),description:O.editor({message:{required_error:"Description is required!"}}),images:O.files({message:{required_error:"Images is required!"}}),code:a.string().min(1,{message:"Product code is required!"}),sku:a.string().min(1,{message:"Product sku is required!"}),quantity:a.number().min(1,{message:"Quantity is required!"}),colors:a.string().array().nonempty({message:"Choose at least one option!"}),sizes:a.string().array().nonempty({message:"Choose at least one option!"}),tags:a.string().array().min(2,{message:"Must have at least 2 items!"}),gender:a.string().array().nonempty({message:"Choose at least one option!"}),price:a.number().min(1,{message:"Price should not be $0.00"}),category:a.string(),priceSale:a.number(),subDescription:a.string(),taxes:a.number(),saleLabel:a.object({enabled:a.boolean(),content:a.string()}),newLabel:a.object({enabled:a.boolean(),content:a.string()})});function Se({currentProduct:s}){const w=W(),[x,j]=o.useState(!1),p=o.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",subDescription:(s==null?void 0:s.subDescription)||"",images:(s==null?void 0:s.images)||[],code:(s==null?void 0:s.code)||"",sku:(s==null?void 0:s.sku)||"",price:(s==null?void 0:s.price)||0,quantity:(s==null?void 0:s.quantity)||0,priceSale:(s==null?void 0:s.priceSale)||0,tags:(s==null?void 0:s.tags)||[],taxes:(s==null?void 0:s.taxes)||0,gender:(s==null?void 0:s.gender)||[],category:(s==null?void 0:s.category)||I[0].classify[1],colors:(s==null?void 0:s.colors)||[],sizes:(s==null?void 0:s.sizes)||[],newLabel:(s==null?void 0:s.newLabel)||{enabled:!1,content:""},saleLabel:(s==null?void 0:s.saleLabel)||{enabled:!1,content:""}}),[s]),r=q({resolver:c(ae),defaultValues:p}),{reset:b,watch:y,setValue:m,handleSubmit:C,formState:{isSubmitting:g}}=r,h=y();o.useEffect(()=>{s&&b(p)},[s,p,b]),o.useEffect(()=>{x?m("taxes",0):m("taxes",(s==null?void 0:s.taxes)||0)},[s==null?void 0:s.taxes,x,m]);const _=C(async l=>{try{await new Promise(n=>setTimeout(n,500)),b(),H.success(s?"Update success!":"Create success!"),w.push($.dashboard.product.root),console.info("DATA",l)}catch(n){console.error(n)}}),z=o.useCallback(l=>{var d;const n=h.images&&((d=h.images)==null?void 0:d.filter(v=>v!==l));m("images",n)},[m,h.images]),F=o.useCallback(()=>{m("images",[],{shouldValidate:!0})},[m]),U=o.useCallback(l=>{j(l.target.checked)},[]),G=e.jsxs(D,{children:[e.jsx(L,{title:"Details",subheader:"Title, short description, image...",sx:{mb:3}}),e.jsx(f,{}),e.jsxs(t,{spacing:3,sx:{p:3},children:[e.jsx(i.Text,{name:"name",label:"Product name"}),e.jsx(i.Text,{name:"subDescription",label:"Sub description",multiline:!0,rows:4}),e.jsxs(t,{spacing:1.5,children:[e.jsx(T,{variant:"subtitle2",children:"Content"}),e.jsx(i.Editor,{name:"description",sx:{maxHeight:480}})]}),e.jsxs(t,{spacing:1.5,children:[e.jsx(T,{variant:"subtitle2",children:"Images"}),e.jsx(i.Upload,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onRemove:z,onRemoveAll:F,onUpload:()=>console.info("ON UPLOAD")})]})]})]}),M=e.jsxs(D,{children:[e.jsx(L,{title:"Properties",subheader:"Additional functions and attributes...",sx:{mb:3}}),e.jsx(f,{}),e.jsxs(t,{spacing:3,sx:{p:3},children:[e.jsxs(S,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(i.Text,{name:"code",label:"Product code"}),e.jsx(i.Text,{name:"sku",label:"Product SKU"}),e.jsx(i.Text,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",InputLabelProps:{shrink:!0}}),e.jsx(i.Select,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:I.map(l=>e.jsx("optgroup",{label:l.group,children:l.classify.map(n=>e.jsx("option",{value:n,children:n},n))},l.group))}),e.jsx(i.MultiSelect,{checkbox:!0,name:"colors",label:"Colors",options:Q}),e.jsx(i.MultiSelect,{checkbox:!0,name:"sizes",label:"Sizes",options:Y})]}),e.jsx(i.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:J.map(l=>l),getOptionLabel:l=>l,renderOption:(l,n)=>o.createElement("li",{...l,key:n},n),renderTags:(l,n)=>l.map((d,v)=>o.createElement(u,{...n({index:v}),key:d,label:d,size:"small",color:"info",variant:"soft"}))}),e.jsxs(t,{spacing:1,children:[e.jsx(T,{variant:"subtitle2",children:"Gender"}),e.jsx(i.MultiCheckbox,{row:!0,name:"gender",options:K,sx:{gap:2}})]}),e.jsx(f,{sx:{borderStyle:"dashed"}}),e.jsxs(t,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(i.Switch,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(i.Text,{name:"saleLabel.content",label:"Sale label",fullWidth:!0,disabled:!h.saleLabel.enabled})]}),e.jsxs(t,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(i.Switch,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(i.Text,{name:"newLabel.content",label:"New label",fullWidth:!0,disabled:!h.newLabel.enabled})]})]})]}),B=e.jsxs(D,{children:[e.jsx(L,{title:"Pricing",subheader:"Price related inputs",sx:{mb:3}}),e.jsx(f,{}),e.jsxs(t,{spacing:3,sx:{p:3},children:[e.jsx(i.Text,{name:"price",label:"Regular price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(S,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(i.Text,{name:"priceSale",label:"Sale price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(S,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(A,{control:e.jsx(R,{id:"toggle-taxes",checked:x,onChange:U}),label:"Price includes taxes"}),!x&&e.jsx(i.Text,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(S,{component:"span",sx:{color:"text.disabled"},children:"%"})})}})]})]}),V=e.jsxs(t,{spacing:3,direction:"row",alignItems:"center",flexWrap:"wrap",children:[e.jsx(A,{control:e.jsx(R,{defaultChecked:!0,inputProps:{id:"publish-switch"}}),label:"Publish",sx:{pl:3,flexGrow:1}}),e.jsx(N,{type:"submit",variant:"contained",size:"large",loading:g,children:s?"Save changes":"Create product"})]});return e.jsx(E,{methods:r,onSubmit:_,children:e.jsxs(t,{spacing:{xs:3,md:5},sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[G,M,B,V]})})}const ie=a.object({rating:a.number().min(1,"Rating must be greater than or equal to 1!"),name:a.string().min(1,{message:"Name is required!"}),review:a.string().min(1,{message:"Review is required!"}),email:a.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Te({onClose:s,...w}){const x={rating:0,review:"",name:"",email:""},j=q({mode:"all",resolver:c(ie),defaultValues:x}),{reset:p,handleSubmit:r,formState:{isSubmitting:b}}=j,y=r(async C=>{try{await new Promise(g=>setTimeout(g,500)),p(),s(),console.info("DATA",C)}catch(g){console.error(g)}}),m=o.useCallback(()=>{s(),p()},[s,p]);return e.jsx(Z,{onClose:s,...w,children:e.jsxs(E,{methods:j,onSubmit:y,children:[e.jsx(P,{children:" Add Review "}),e.jsxs(ee,{children:[e.jsxs("div",{children:[e.jsx(T,{variant:"body2",sx:{mb:1},children:"Your review about this product:"}),e.jsx(i.Rating,{name:"rating"})]}),e.jsx(i.Text,{name:"review",label:"Review *",multiline:!0,rows:3,sx:{mt:3}}),e.jsx(i.Text,{name:"name",label:"Name *",sx:{mt:3}}),e.jsx(i.Text,{name:"email",label:"Email *",sx:{mt:3}})]}),e.jsxs(se,{children:[e.jsx(X,{color:"inherit",variant:"outlined",onClick:m,children:"Cancel"}),e.jsx(N,{type:"submit",variant:"contained",loading:b,children:"Post"})]})]})})}export{Te as P,Se as a};
