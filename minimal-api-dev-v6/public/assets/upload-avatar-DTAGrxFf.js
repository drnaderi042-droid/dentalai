import{r as p,j as r,B as n,v as t,I as w,T as C}from"./index-BSItzkt3.js";import{u as I}from"./preview-multi-file-C1SdoyfF.js";import{g as U}from"./avatar-url-S8pB8DFh.js";import{I as E}from"./image-BuqYs7tq.js";import{R as P}from"./upload-C5NUn5Ko.js";function B({sx:d,error:h,value:o,disabled:c,helperText:l,...m}){const{getRootProps:g,getInputProps:x,isDragActive:f,isDragReject:j,fileRejections:u}=I({multiple:!1,disabled:c,accept:{"image/*":[]},...m}),a=!!o,s=j||!!h,[v,i]=p.useState("");p.useEffect(()=>{if(typeof o=="string"&&o)i(U(o));else if(o instanceof File){const e=URL.createObjectURL(o);return i(e),()=>{URL.revokeObjectURL(e)}}else i("")},[o]);const b=a&&r.jsx(E,{alt:"avatar",src:v,sx:{width:1,height:1,borderRadius:"50%"}}),y=r.jsxs(n,{className:"upload-placeholder",sx:{top:0,gap:1,left:0,width:1,height:1,zIndex:9,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"text.disabled",flexDirection:"column",justifyContent:"center",bgcolor:e=>t(e.vars.palette.grey["500Channel"],.08),transition:e=>e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter}),"&:hover":{opacity:.72},...s&&{color:"error.main",bgcolor:e=>t(e.vars.palette.error.mainChannel,.08)},...a&&{zIndex:9,opacity:0,color:"common.white",bgcolor:e=>t(e.vars.palette.grey["900Channel"],.64)}},children:[r.jsx(w,{icon:"solar:camera-add-bold",width:32}),r.jsx(C,{variant:"caption",children:a?"به‌روزرسانی عکس":"آپلود عکس"})]}),R=r.jsxs(n,{sx:{width:1,height:1,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[b,y]});return r.jsxs(r.Fragment,{children:[r.jsxs(n,{...g(),sx:{p:1,m:"auto",width:144,height:144,cursor:"pointer",overflow:"hidden",borderRadius:"50%",border:e=>`1px dashed ${t(e.vars.palette.grey["500Channel"],.2)}`,...f&&{opacity:.72},...c&&{opacity:.48,pointerEvents:"none"},...s&&{borderColor:"error.main"},...a&&{...s&&{bgcolor:e=>t(e.vars.palette.error.mainChannel,.08)},"&:hover .upload-placeholder":{opacity:1}},...d},children:[r.jsx("input",{...x()}),R]}),l&&l,r.jsx(P,{files:u})]})}export{B as U};
