import{r as l,b9 as V,j as e,B as x,aB as $,aK as q,cV as se,d as v,I as r,dl as J,bb as K,bc as F,ar as G,cI as _,n as ne,dq as H,k as y,S as c,o as S,ef as re,T as A,az as ie,R as ae,dA as te,C as le,d_ as ce,aC as de}from"./index-BSItzkt3.js";import{u as he}from"./use-copy-to-clipboard-DjXsLre-.js";import{a as Q}from"./format-number-BVcmMM5V.js";import{C as xe}from"./confirm-dialog-DqS9qtsb.js";import{D as X}from"./DialogTitle-D9mOMHyE.js";import{T as N}from"./TextField-DpdcsLRb.js";import{D as Y}from"./dialogTitleClasses-BJYaWiXv.js";import{a as pe,F as me}from"./file-thumbnail-J0C6dV__.js";import{A as ue}from"./Autocomplete-B4c-hVbi.js";import{C as je}from"./Chip-CHY_XJWs.js";import{C as B}from"./Checkbox-p5PKnry8.js";import{U as ge}from"./upload-C5NUn5Ko.js";import"./image-BuqYs7tq.js";import{D as ve}from"./DialogContent-CPx_wcNJ.js";import{A as fe}from"./AvatarGroup-CCNk5uPB.js";function Z({person:i}){const[o,t]=l.useState(i.permission),n=V(),d=l.useCallback(h=>{t(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(x,{component:"li",sx:{display:"flex",alignItems:"center",py:1},children:[e.jsx($,{alt:i.name,src:i.avatarUrl,sx:{mr:2}}),e.jsx(q,{primary:i.name,secondary:e.jsx(se,{title:i.email,children:e.jsx("span",{children:i.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(v,{size:"small",color:"inherit",endIcon:e.jsx(r,{width:16,icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),onClick:n.onOpen,sx:{flexShrink:0,fontSize:h=>h.typography.pxToRem(12),...n.open&&{bgcolor:"action.selected"}},children:["Can ",o]})]}),e.jsx(J,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsxs(K,{children:[e.jsxs(F,{selected:o==="view",onClick:()=>{n.onClose(),d("view")},children:[e.jsx(r,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(F,{selected:o==="edit",onClick:()=>{n.onClose(),d("edit")},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{n.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}function ee({open:i,shared:o,onClose:t,onCopyLink:n,inviteEmail:d,onChangeInvite:h,...p}){const m=o&&!!o.length;return e.jsxs(_,{fullWidth:!0,maxWidth:"xs",open:i,onClose:t,...p,children:[e.jsx(X,{children:" Invite "}),e.jsx(x,{sx:{px:3},children:h&&e.jsx(N,{fullWidth:!0,value:d,placeholder:"Email",onChange:h,InputProps:{endAdornment:e.jsx(ne,{position:"end",children:e.jsx(v,{color:"inherit",variant:"contained",disabled:!d,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}})}),m&&e.jsx(H,{sx:{height:60*5,px:3},children:e.jsx(x,{component:"ul",children:o.map(a=>e.jsx(Z,{person:a},a.id))})}),e.jsxs(Y,{sx:{justifyContent:"space-between"},children:[n&&e.jsx(v,{startIcon:e.jsx(r,{icon:"eva:link-2-fill"}),onClick:n,children:"Copy link"}),t&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:t,children:"Close"})]})]})}function Ce({item:i,open:o,onClose:t,onDelete:n,favorited:d,onFavorite:h,onCopyLink:p,...m}){const{name:a,size:j,url:b,type:g,shared:u,modifiedAt:w}=i,f=u&&!!u.length,k=y(!0),C=y(),I=y(!0),[R,P]=l.useState(""),[D,M]=l.useState(i.tags.slice(0,3)),W=l.useCallback(s=>{P(s.target.value)},[]),L=l.useCallback(s=>{M(s)},[]),O=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(S,{size:"small",onClick:k.onToggle,children:e.jsx(r,{icon:k.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),k.value&&e.jsx(ue,{multiple:!0,freeSolo:!0,options:i.tags.map(s=>s),getOptionLabel:s=>s,defaultValue:i.tags.slice(0,3),value:D,onChange:(s,T)=>{L(T)},renderOption:(s,T)=>l.createElement("li",{...s,key:T},T),renderTags:(s,T)=>s.map((U,oe)=>l.createElement(je,{...T({index:oe}),size:"small",variant:"soft",label:U,key:U})),renderInput:s=>e.jsx(N,{...s,placeholder:"#Add a tags"})})]}),z=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(S,{size:"small",onClick:I.onToggle,children:e.jsx(r,{icon:I.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),I.value&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),Q(j)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),re(w)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),pe(g)]})]})]}),E=e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(A,{variant:"subtitle2",children:" Share with "}),e.jsx(S,{size:"small",color:"primary",onClick:C.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),f&&e.jsx(x,{component:"ul",sx:{pl:2,pr:1},children:u.map(s=>e.jsx(Z,{person:s},s.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(ie,{open:o,onClose:t,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...m,children:[e.jsxs(H,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(A,{variant:"h6",children:" Info "}),e.jsx(B,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:d,onChange:h})]}),e.jsxs(c,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(me,{imageView:!0,file:g==="folder"?g:b,sx:{width:"auto",height:"auto",alignSelf:"flex-start"},slotProps:{img:{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover"},icon:{width:64,height:64}}}),e.jsx(A,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:a}),e.jsx(G,{sx:{borderStyle:"dashed"}}),O,z]}),E]}),e.jsx(x,{sx:{p:2.5},children:e.jsx(v,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),onClick:n,children:"Delete"})})]}),e.jsx(ee,{open:C.value,shared:u,inviteEmail:R,onChangeInvite:W,onCopyLink:p,onClose:()=>{C.onFalse(),P("")}})]})}function Le({sx:i,link:o,title:t,onOpen:n,subtitle:d,collapse:h,onCollapse:p,...m}){return e.jsxs(c,{direction:"row",alignItems:"center",sx:{mb:3,...i},...m,children:[e.jsxs(c,{flexGrow:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(A,{variant:"h6",children:[" ",t," "]}),e.jsx(S,{size:"small",color:"primary",onClick:n,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),e.jsx(x,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:d})]}),o&&e.jsx(v,{href:o,component:ae,size:"small",color:"inherit",endIcon:e.jsx(r,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View all"}),p&&e.jsx(S,{onClick:p,children:e.jsx(r,{icon:h?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function ye({open:i,onClose:o,onCreate:t,onUpdate:n,folderName:d,onChangeFolderName:h,title:p="آپلود فایل‌ها",...m}){const[a,j]=l.useState([]);l.useEffect(()=>{i||j([])},[i]);const b=l.useCallback(f=>{j([...a,...f])},[a]),g=()=>{o(),console.info("ON UPLOAD")},u=f=>{const k=a.filter(C=>C!==f);j(k)},w=()=>{j([])};return e.jsxs(_,{fullWidth:!0,maxWidth:"sm",open:i,onClose:o,...m,children:[e.jsxs(X,{sx:{p:f=>f.spacing(3,3,2,3)},children:[" ",p," "]}),e.jsxs(ve,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(t||n)&&e.jsx(N,{fullWidth:!0,label:"نام پوشه",value:d,onChange:h,sx:{mb:3}}),e.jsx(ge,{multiple:!0,value:a,onDrop:b,onRemove:u})]}),e.jsxs(Y,{children:[e.jsx(v,{variant:"contained",startIcon:e.jsx(r,{icon:"eva:cloud-upload-fill"}),onClick:g,children:"آپلود"}),!!a.length&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:w,children:"حذف همه"}),(t||n)&&e.jsx(c,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(v,{variant:"soft",onClick:t||n,children:n?"ذخیره":"ایجاد"})})]})]})}function Oe({sx:i,folder:o,selected:t,onSelect:n,onDelete:d,...h}){var z,E;const{copy:p}=he(),m=y(),a=V(),j=y(),b=y(),g=y(),u=y(),w=y(o.isFavorited),[f,k]=l.useState(""),[C,I]=l.useState(o.name),R=l.useCallback(s=>{k(s.target.value)},[]),P=l.useCallback(s=>{I(s.target.value)},[]),D=l.useCallback(()=>{te.success("Copied!"),p(o.url)},[p,o.url]),M=e.jsxs(c,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(B,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:w.value,onChange:w.onToggle,inputProps:{name:"checkbox-favorite","aria-label":"Checkbox favorite"}}),e.jsx(S,{color:a.open?"inherit":"default",onClick:a.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]}),W=e.jsx(x,{onMouseEnter:g.onTrue,onMouseLeave:g.onFalse,sx:{width:36,height:36},children:(g.value||t)&&n?e.jsx(B,{checked:t,onClick:n,icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),sx:{width:1,height:1}}):e.jsx(x,{component:"img",src:`${le.site.basePath}/assets/icons/files/ic-folder.svg`,sx:{width:1,height:1}})}),L=e.jsx(q,{onClick:b.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[Q(o.size),e.jsx(x,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),O=e.jsx(fe,{max:3,sx:{[`& .${ce.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(z=o.shared)==null?void 0:z.map(s=>e.jsx($,{alt:s.name,src:s.avatarUrl},s.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(de,{variant:"outlined",sx:{gap:1,p:2.5,maxWidth:222,display:"flex",borderRadius:2,cursor:"pointer",position:"relative",bgcolor:"transparent",flexDirection:"column",alignItems:"flex-start",...(g.value||t)&&{bgcolor:"background.paper",boxShadow:s=>s.customShadows.z20},...i},...h,children:[W,M,L,!!((E=o==null?void 0:o.shared)!=null&&E.length)&&O]}),e.jsx(J,{open:a.open,anchorEl:a.anchorEl,onClose:a.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(K,{children:[e.jsxs(F,{onClick:()=>{a.onClose(),D()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(F,{onClick:()=>{a.onClose(),m.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(F,{onClick:()=>{a.onClose(),u.onTrue()},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{j.onTrue(),a.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(Ce,{item:o,favorited:w.value,onFavorite:w.onToggle,onCopyLink:D,open:b.value,onClose:b.onFalse,onDelete:()=>{b.onFalse(),d()}}),e.jsx(ee,{open:m.value,shared:o.shared,inviteEmail:f,onChangeInvite:R,onCopyLink:D,onClose:()=>{m.onFalse(),k("")}}),e.jsx(ye,{open:u.value,onClose:u.onFalse,title:"Edit Folder",onUpdate:()=>{u.onFalse(),I(C),console.info("UPDATE FOLDER",C)},folderName:C,onChangeFolderName:P}),e.jsx(xe,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(v,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}export{Ce as F,ee as a,Le as b,Oe as c,ye as d};
