import{k as S,b9 as L,j as e,L as K,S as b,aB as P,B as w,aK as k,em as V,aL as z,dd as O,o as f,I as x,d2 as q,aC as M,dl as B,bb as E,bc as C,d as N,r as h,n as Q,eX as G,h as J,eY as X,dr as Y,eZ as Z,dA as R,p as y,e5 as ee,cL as te,e_ as se,v as ae,cK as oe,cV as ne,dq as le,e$ as re}from"./index-BH9ijvcg.js";import{C as W}from"./confirm-dialog-U4gI9R8N.js";import{C as ie}from"./custom-breadcrumbs-C3JvxER0.js";import{u as ce,r as de,T as he,e as ue,g as me}from"./table-selected-action-BoGEyWv0.js";import{T as xe}from"./table-no-data-DkwRy3n-.js";import{T as pe}from"./table-empty-rows-DGVXR25q.js";import{T as ge}from"./table-head-custom-DVMZJ-e5.js";import{T as je}from"./table-pagination-custom-C6u0JfTk.js";import{b as A}from"./format-number-z67FV_-O.js";import{T as F,a as be,b as Ce}from"./TableHead-CgILorvc.js";import{T as g}from"./TableCell-C_iRAQPi.js";import{C as we}from"./Checkbox-AhG6TMzi.js";import{D as I}from"./DatePicker-Br6g6rY4.js";import{f as fe}from"./FormHelperText-CAGzEAMm.js";import{T as ye}from"./TextField-DgF_8CdY.js";import{F as ve,a as v,c as T}from"./filters-result-C-KhAJgH.js";import{C as D}from"./Chip-CWilL4Fh.js";import{C as Te}from"./Card-CwEGl0A2.js";function De({row:t,selected:i,onViewRow:n,onSelectRow:l,onDeleteRow:u}){const o=S(),c=S(),s=L(),p=e.jsxs(F,{hover:!0,selected:i,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(we,{checked:i,onClick:l,inputProps:{id:`row-checkbox-${t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(g,{children:e.jsx(K,{color:"inherit",onClick:n,underline:"always",sx:{cursor:"pointer"},children:t.orderNumber})}),e.jsx(g,{children:e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(P,{alt:t.customer.name,src:t.customer.avatarUrl}),e.jsxs(b,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(w,{component:"span",children:t.customer.name}),e.jsx(w,{component:"span",sx:{color:"text.disabled"},children:t.customer.email})]})]})}),e.jsx(g,{children:e.jsx(k,{primary:z(t.createdAt),secondary:V(t.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(g,{align:"center",children:[" ",t.totalQuantity," "]}),e.jsxs(g,{children:[" ",A(t.subtotal)," "]}),e.jsx(g,{children:e.jsx(O,{variant:"soft",color:t.status==="completed"&&"success"||t.status==="pending"&&"warning"||t.status==="cancelled"&&"error"||"default",children:t.status})}),e.jsxs(g,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(f,{color:c.value?"inherit":"default",onClick:c.onToggle,sx:{...c.value&&{bgcolor:"action.hover"}},children:e.jsx(x,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(f,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})]}),r=e.jsx(F,{children:e.jsx(g,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(q,{in:c.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(M,{sx:{m:1.5},children:t.items.map(d=>e.jsxs(b,{direction:"row",alignItems:"center",sx:{p:j=>j.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:j=>`solid 2px ${j.vars.palette.background.neutral}`}},children:[e.jsx(P,{src:d.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(k,{primary:d.name,secondary:d.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs("div",{children:["x",d.quantity," "]}),e.jsx(w,{sx:{width:110,textAlign:"right"},children:A(d.price)})]},d.id))})})})});return e.jsxs(e.Fragment,{children:[p,r,e.jsx(B,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(E,{children:[e.jsxs(C,{onClick:()=>{o.onTrue(),s.onClose()},sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(C,{onClick:()=>{n(),s.onClose()},children:[e.jsx(x,{icon:"solar:eye-bold"}),"View"]})]})}),e.jsx(W,{open:o.value,onClose:o.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(N,{variant:"contained",color:"error",onClick:u,children:"Delete"})})]})}function Se({filters:t,onResetPage:i,dateError:n}){const l=L(),u=h.useCallback(s=>{i(),t.setState({name:s.target.value})},[t,i]),o=h.useCallback(s=>{i(),t.setState({startDate:s})},[t,i]),c=h.useCallback(s=>{i(),t.setState({endDate:s})},[t,i]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(I,{label:"Start date",value:t.state.startDate,onChange:o,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(I,{label:"End date",value:t.state.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:n,helperText:n?"End date must be later than start date":null}},sx:{maxWidth:{md:200},[`& .${fe.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(ye,{fullWidth:!0,value:t.state.name,onChange:u,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(f,{onClick:l.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(B,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(E,{children:[e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(x,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(x,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(x,{icon:"solar:export-bold"}),"Export"]})]})})]})}function Pe({filters:t,totalResults:i,onResetPage:n,sx:l}){const u=h.useCallback(()=>{n(),t.setState({name:""})},[t,n]),o=h.useCallback(()=>{n(),t.setState({status:"all"})},[t,n]),c=h.useCallback(()=>{n(),t.setState({startDate:null,endDate:null})},[t,n]),s=h.useCallback(()=>{n(),t.onResetState()},[t,n]);return e.jsxs(ve,{totalResults:i,onReset:s,sx:l,children:[e.jsx(v,{label:"Status:",isShow:t.state.status!=="all",children:e.jsx(D,{...T,label:t.state.status,onDelete:o,sx:{textTransform:"capitalize"}})}),e.jsx(v,{label:"Date:",isShow:!!(t.state.startDate&&t.state.endDate),children:e.jsx(D,{...T,label:G(t.state.startDate,t.state.endDate),onDelete:c})}),e.jsx(v,{label:"Keyword:",isShow:!!t.state.name,children:e.jsx(D,{...T,label:t.state.name,onDelete:u})})]})}const ke=[{value:"all",label:"All"},...se],Re=[{id:"orderNumber",label:"Order",width:88},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}];function Ge(){const t=ce({defaultOrderBy:"orderNumber"}),i=J(),n=S(),[l,u]=h.useState(X),o=Y({name:"",status:"all",startDate:null,endDate:null}),c=Z(o.state.startDate,o.state.endDate),s=Ae({inputData:l,comparator:me(t.order,t.orderBy),filters:o.state,dateError:c}),p=de(s,t.page,t.rowsPerPage),r=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!s.length&&r||!s.length,j=h.useCallback(a=>{const m=l.filter(H=>H.id!==a);R.success("Delete success!"),u(m),t.onUpdatePageDeleteRow(p.length)},[p.length,t,l]),U=h.useCallback(()=>{const a=l.filter(m=>!t.selected.includes(m.id));R.success("Delete success!"),u(a),t.onUpdatePageDeleteRows({totalRowsInPage:p.length,totalRowsFiltered:s.length})},[s.length,p.length,t,l]),_=h.useCallback(a=>{i.push(y.dashboard.order.details(a))},[i]),$=h.useCallback((a,m)=>{t.onResetPage(),o.setState({status:m})},[o,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(ie,{heading:"List",links:[{name:"Dashboard",href:y.dashboard.root},{name:"Order",href:y.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(Te,{children:[e.jsx(te,{value:o.state.status,onChange:$,sx:{px:2.5,boxShadow:a=>`inset 0 -2px 0 0 ${ae(a.vars.palette.grey["500Channel"],.08)}`},children:ke.map(a=>e.jsx(oe,{iconPosition:"end",value:a.value,label:a.label,icon:e.jsx(O,{variant:(a.value==="all"||a.value===o.state.status)&&"filled"||"soft",color:a.value==="completed"&&"success"||a.value==="pending"&&"warning"||a.value==="cancelled"&&"error"||"default",children:["completed","pending","cancelled","refunded"].includes(a.value)?l.filter(m=>m.status===a.value).length:l.length})},a.value))}),e.jsx(Se,{filters:o,onResetPage:t.onResetPage,dateError:c}),r&&e.jsx(Pe,{filters:o,totalResults:s.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(w,{sx:{position:"relative"},children:[e.jsx(he,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(m=>m.id)),action:e.jsx(ne,{title:"Delete",children:e.jsx(f,{color:"primary",onClick:n.onTrue,children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(le,{sx:{minHeight:444},children:e.jsxs(be,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ge,{order:t.order,orderBy:t.orderBy,headLabel:Re,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(m=>m.id))}),e.jsxs(Ce,{children:[s.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>e.jsx(De,{row:a,selected:t.selected.includes(a.id),onSelectRow:()=>t.onSelectRow(a.id),onDeleteRow:()=>j(a.id),onViewRow:()=>_(a.id)},a.id)),e.jsx(pe,{height:t.dense?56:76,emptyRows:ue(t.page,t.rowsPerPage,s.length)}),e.jsx(xe,{notFound:d})]})]})})]}),e.jsx(je,{page:t.page,dense:t.dense,count:s.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]}),e.jsx(W,{open:n.value,onClose:n.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(N,{variant:"contained",color:"error",onClick:()=>{U(),n.onFalse()},children:"Delete"})})]})}function Ae({inputData:t,comparator:i,filters:n,dateError:l}){const{status:u,name:o,startDate:c,endDate:s}=n,p=t.map((r,d)=>[r,d]);return p.sort((r,d)=>{const j=i(r[0],d[0]);return j!==0?j:r[1]-d[1]}),t=p.map(r=>r[0]),o&&(t=t.filter(r=>r.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||r.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||r.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),u!=="all"&&(t=t.filter(r=>r.status===u)),l||c&&s&&(t=t.filter(r=>re(r.createdAt,c,s))),t}export{Ge as O};
