# ุฑุงูููุง ฺฉุงูู ุงุถุงูู ฺฉุฑุฏู ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ ุจุง LabelStudio

## ๐ ููุง ฺฉู

ุงู ุฑุงูููุง ูุญูู ุงุถุงูู ฺฉุฑุฏู ฒ ููุฏูุงุฑฺฉ ุฌุฏุฏ ุจู ูุฏู Aariz ุจุง ุงุณุชูุงุฏู ุงุฒ LabelStudio ุฑุง ุชูุถุญ ูโุฏูุฏ.

## ๐ฏ ูุฑุงุญู ฺฉุงุฑ

### ูุฑุญูู ฑ: ุขูุงุฏูโุณุงุฒ ูุญุท

#### ูุตุจ LabelStudio
```bash
pip install label-studio
```

#### ุจุฑุฑุณ ูุตุจ
```bash
label-studio --version
```

### ูุฑุญูู ฒ: ุงูุชุฎุงุจ ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ

ฒ ููุฏูุงุฑฺฉ ูพุดููุงุฏ ุจุฑุง ุงุถุงูู ฺฉุฑุฏู:

1. **PT** (Pterygoid): ููุทู ูพุชุฑฺฏูุฆุฏ
2. **PTL** (Pterygoid Left): ูพุชุฑฺฏูุฆุฏ ุณูุช ฺูพ

ุง ููุฏูุงุฑฺฉโูุง ุฏฺฏุฑ ูุงููุฏ:
- **Cd** (Condylion): ฺฉูุฏููู
- **Ba** (Basion): ุจุงุฒู

### ูุฑุญูู ณ: ุฑุงูโุงูุฏุงุฒ ูพุฑูฺู LabelStudio

#### ุงุฌุฑุง ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ
```bash
python Aariz/setup_labelstudio_annotation.py \
    --image_dir /path/to/your/100/images \
    --landmark_symbols PT PTL \
    --output_dir labelstudio_project
```

**ูพุงุฑุงูุชุฑูุง:**
- `--image_dir`: ูุณุฑ ูููุฏุฑ ุชุตุงูุฑ X-ray (ุญุฏุงูู ฑฐฐ ุชุตูุฑ)
- `--landmark_symbols`: ูุงู ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ (PT PTL)
- `--output_dir`: ูููุฏุฑ ุฎุฑูุฌ ูพุฑูฺู

#### ุฎุฑูุฌ ุงุณฺฉุฑูพุช
```
LabelStudio project setup complete!
Project files saved to: labelstudio_project
Number of images found: 100
Total landmarks to annotate: 29 + 2
New landmarks: ['PT', 'PTL']
```

### ูุฑุญูู ด: ุฑุงูโุงูุฏุงุฒ LabelStudio

#### ุดุฑูุน LabelStudio
```bash
label-studio start
```

#### ุฏุณุชุฑุณ ุจู ุฑุงุจุท ฺฉุงุฑุจุฑ
ุจุงุฒ ฺฉูุฏ: http://localhost:8080

#### ุงุฌุงุฏ ูพุฑูฺู ุฌุฏุฏ
1. ุฑู "Create" ฺฉูฺฉ ฺฉูุฏ
2. ูุงู ูพุฑูฺู: "Cephalometric Landmark Annotation"
3. ุชูุธูุงุช ูพุดุฑูุชู: ูุงู `labelstudio_project/project_config.json` ุฑุง ุงููพูุฑุช ฺฉูุฏ

#### ุงููพูุฑุช ุชุตุงูุฑ
1. ุจู ุจุฎุด "Data Import" ุจุฑูุฏ
2. ูุงู `labelstudio_project/tasks.json` ุฑุง ุขูพููุฏ ฺฉูุฏ

### ูุฑุญูู ต: ุขููุชุช ฺฉุฑุฏู ุชุตุงูุฑ

#### ุฑุงูููุง ุขููุชุช
1. **ุชุตุงูุฑ ูพุงู (ฒน ููุฏูุงุฑฺฉ)**: ููู ุฑุง ุขููุชุช ฺฉูุฏ
2. **ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ**: ููุท ุฏุฑ ุตูุฑุช ูุดุงูุฏู ูุงุถุญ ุขููุชุช ฺฉูุฏ
3. **ุฏูุช**: ุงุฒ ุฒูู ู ูพุงู ุจุฑุง ุฏูุช ุจุดุชุฑ ุงุณุชูุงุฏู ฺฉูุฏ

#### ฺฉูุฏูุง ูุงูุจุฑ ููุฏ
- `Ctrl+Z`: Undo
- `Delete`: ุญุฐู ููุทู
- `Space`: ุชุตูุฑ ุจุนุฏ
- `Shift+Space`: ุชุตูุฑ ูุจู

#### ูฺฉุงุช ููู
- ุญุฏุงูู ตฐ-ฑฐฐ ุชุตูุฑ ุฑุง ุจุง ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ ุขููุชุช ฺฉูุฏ
- ุชูุฒุน ุฏุงุฏูโูุง ุฑุง ุฏุฑ train/valid/test ุฑุนุงุช ฺฉูุฏ
- ุงุฒ ุชุตุงูุฑ ุจุง ฺฉูุช ุจุงูุง ุงุณุชูุงุฏู ฺฉูุฏ

### ูุฑุญูู ถ: ุงุณุชุฎุฑุงุฌ ุขููุชุชโูุง

#### ุงุฒ LabelStudio
1. ุจู ุจุฎุด "Export" ุจุฑูุฏ
2. ูุฑูุช: "JSON"
3. ุฏุงูููุฏ ูุงู ุฎุฑูุฌ

#### ุชุจุฏู ุจู ูุฑูุช Aariz
```bash
python labelstudio_project/convert_annotations.py \
    labelstudio_export_dir \
    aariz_annotations_output
```

### ูุฑุญูู ท: Fine-tuning ูุฏู

#### ุงุฌุฑุง Fine-tuning
```bash
python Aariz/finetune_with_labelstudio.py \
    --annotations_dir aariz_annotations_output \
    --landmark_symbols PT PTL \
    --checkpoint Aariz/checkpoint_best_512.pth \
    --batch_size 4 \
    --epochs 50 \
    --lr 0.0001
```

#### ูพุงุฑุงูุชุฑูุง ููู
- `--annotations_dir`: ูููุฏุฑ ุขููุชุชโูุง ุชุจุฏู ุดุฏู
- `--landmark_symbols`: ูุงู ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ
- `--checkpoint`: ูุฏู ูพุงู ููุฌูุฏ
- `--batch_size`: ุจุณุชู ุจู GPU (ด-ถ ุจุฑุง RTX 3070 Ti)
- `--epochs`: ตฐ-ฑฐฐ epoch
- `--lr`: ฑe-ด (ุจุฑุง fine-tuning)

### ูุฑุญูู ธ: ุงุฑุฒุงุจ ูุฏู ุฌุฏุฏ

#### ุชุณุช ูุฏู
```bash
python Aariz/test_extended_model.py \
    --checkpoint checkpoints_extended/checkpoint_best.pth \
    --landmark_symbols PT PTL
```

#### ูุนุงุฑูุง ุงุฑุฒุงุจ
- **MRE** (Mean Radial Error): ุฎุทุง ูุชูุณุท (ฺฉูุชุฑ ุจูุชุฑ)
- **SDR@2mm**: ุฏุฑุตุฏ ููุงุท ุจุง ุฎุทุง ฺฉูุชุฑ ุงุฒ ฒ ููโูุชุฑ (ุจุดุชุฑ ุจูุชุฑ)

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```
Aariz/
โโโ setup_labelstudio_annotation.py    # ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ
โโโ finetune_with_labelstudio.py       # ุงุณฺฉุฑูพุช fine-tuning
โโโ finetune_extended_landmarks.py     # ูุณุชู fine-tuning
โโโ dataset_extended.py                # ุฏุชุงุณุช extended
โโโ LABELSTUDIO_GUIDE.md              # ุงู ุฑุงูููุง

labelstudio_project/
โโโ project_config.json               # ุชูุธูุงุช ูพุฑูฺู
โโโ tasks.json                        # ูุณุช ุชุตุงูุฑ
โโโ convert_annotations.py            # ุชุจุฏู ูุฑูุช
โโโ import_project.sh                 # ุงุณฺฉุฑูพุช ุงููพูุฑุช

checkpoints_extended/
โโโ checkpoint_best.pth              # ูุฏู ุขููุฒุด ุฏุฏู
```

## โ๏ธ ูฺฉุงุช ููู

### ฺฉูุช ุฏุงุฏูโูุง
- ุงุฒ ุชุตุงูุฑ ุจุง ฺฉูุช ุจุงูุง ุงุณุชูุงุฏู ฺฉูุฏ
- ุขููุชุช ุฑุง ุชูุณุท ูุชุฎุตุตู ุงูุฌุงู ุฏูุฏ
- ุญุฏุงูู ฑฐฐ ุชุตูุฑ ุจุง ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ

### ุชูุธูุงุช ุขููุฒุด
- **Learning Rate**: ฑe-ด ุจุฑุง fine-tuning
- **Batch Size**: ด-ถ ุจุณุชู ุจู GPU
- **Epochs**: ตฐ-ฑฐฐ
- **Freeze Backbone**: ูุนุงู (ุจุฑุง ุญูุธ ุฏุงูุด ููุฌูุฏ)

### ุงุฑุฒุงุจ
- ูุฏู ุฑุง ุฑู validation set ุงุฑุฒุงุจ ฺฉูุฏ
- MRE ฺฉูุชุฑ ุงุฒ ฒ ููโูุชุฑ ูุทููุจ ุงุณุช
- SDR@2mm ุจุงูุงุชุฑ ุงุฒ ธฐ% ุฎูุจ ุงุณุช

## ๐ง ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ
1. **Out of Memory**: Batch size ุฑุง ฺฉุงูุด ุฏูุฏ
2. **Convergence Issues**: Learning rate ุฑุง ุชูุธู ฺฉูุฏ
3. **Poor Accuracy**: ุฏุงุฏูโูุง ุจุดุชุฑ ุงุถุงูู ฺฉูุฏ

### ูุงฺฏโูุง ู ูุงูุชูุฑูฺฏ
- TensorBoard: `tensorboard --logdir logs_extended`
- ูุงูุชูุฑูฺฏ ุขููุฒุด ุฏุฑ ุฒูุงู ูุงูุน

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ูุดฺฉู:
1. ูุงฺฏโูุง ุฎุทุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ุชูุธูุงุช GPU ู RAM ุฑุง ุชุฃุฏ ฺฉูุฏ
3. ุงุฒ ุฏุงุฏูโูุง ูุนุชุจุฑ ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ูุชุฌู ููุง

ูพุณ ุงุฒ ุชฺฉูู ุงู ูุฑุงุญู:
- ูุฏู ุดูุง ณฑ ููุฏูุงุฑฺฉ ุฎูุงูุฏ ุฏุงุดุช (ฒน + ฒ ุฌุฏุฏ)
- ุฏูุช ุจุงูุง ุฑู ููุฏูุงุฑฺฉโูุง ุฌุฏุฏ
- ูุงุจูุช ุงุณุชูุงุฏู ุฏุฑ ุจุฑูุงููโูุง ฺฉููฺฉ

ูููู ุจุงุดุฏ! ๐ฏ
