# ๐ ุฑุงูููุง ุขููุฒุด ุจุง ุณุงุฒ 768x768 ุจุฑุง RTX 3070 Ti

## ๐ ุฎูุงุตู

ุงู ุฑุงูููุง ูุญูู ุขููุฒุด ูุฏู ุจุง ุฏุชุงุณุช Aariz ุฏุฑ ุณุงุฒ **768x768** ุฑุง ุจุฑุง ฺฉุงุฑุช ฺฏุฑุงูฺฉ **RTX 3070 Ti (8GB VRAM)** ุชูุถุญ ูโุฏูุฏ.

## ๐ฏ ูพุดโูุงุฒูุง

- โ ุฏุชุงุณุช Aariz ุฏุฑ ูพูุดู `Aariz`
- โ ฺฉุงุฑุช ฺฏุฑุงูฺฉ RTX 3070 Ti (8GB VRAM)
- โ PyTorch ุจุง ูพุดุชุจุงู CUDA ูุตุจ ุดุฏู ุจุงุดุฏ

## โ๏ธ ุชูุธูุงุช ุจููู ุจุฑุง 768x768

### ุชูุธูุงุช ูพุดููุงุฏ (ุจููู - ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ ุงุฒ VRAM):

```bash
--image_size 768 768
--batch_size 6
--lr 3e-4
--epochs 200
--warmup_epochs 10
--loss adaptive_wing
--mixed_precision  # ุงูุฒุงู ุจุฑุง 8GB VRAM
--num_workers 2
```

**ูุดุฎุตุงุช:**
- **Effective Batch Size:** 6
- **VRAM Usage:** ~7.5-8GB (ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ ุงุฒ VRAM)
- **ุฑุณฺฉ OOM:** โ ุจุณุงุฑ ฺฉู (ุจุง margin ฺฉูฺฺฉ)
- **ุฒูุงู ุชูุฑุจ:** 12-16 ุณุงุนุช (ุฎู ุณุฑุน!)

### ุงฺฏุฑ OOM ฺฏุฑูุชุฏ:

```bash
--batch_size 5  # ฺฉุงูุด ุงุฒ 6 ุจู 5
--batch_size 4  # ุง ฺฉุงูุด ุจู 4
```

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ Script (ูพุดููุงุฏ) โญ

```cmd
cd Aariz
train_768x768_rtx3070ti.bat
```

ุงู script ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ุชูุธูุงุช ุจููู ุจุฑุง RTX 3070 Ti ุงุณุชูุงุฏู ูโฺฉูุฏ.

### ุฑูุด 2: ุฏุณุชูุฑ ูุณุชูู (ุจููู - ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ ุงุฒ VRAM)

```cmd
python train.py --dataset_path Aariz --model hrnet --image_size 768 768 --batch_size 6 --epochs 200 --lr 3e-4 --warmup_epochs 10 --loss adaptive_wing --mixed_precision --num_workers 2 --save_dir checkpoints_768x768 --log_dir logs_768x768
```

### ุฑูุด 3: ุฏุณุชูุฑ ูุณุชูู (ุงฺฏุฑ OOM ฺฏุฑูุชุฏ)

```cmd
python train.py --dataset_path Aariz --model hrnet --image_size 768 768 --batch_size 5 --epochs 200 --lr 3e-4 --warmup_epochs 10 --loss adaptive_wing --mixed_precision --num_workers 2 --save_dir checkpoints_768x768 --log_dir logs_768x768
```

---

## ๐ ุฌุฏูู ุชูุธูุงุช

| Batch Size | VRAM | ุฑุณฺฉ OOM | ุชูุตู | ุฒูุงู ุชูุฑุจ |
|------------|------|----------|-------|-------------|
| 6 | ~7.5-8GB | โ Safe | โญ ูพุดููุงุฏ (ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ) | 12-16 ุณุงุนุช |
| 5 | ~7-7.5GB | โ Safe | โ ุงฺฏุฑ OOM ฺฏุฑูุชุฏ | 14-18 ุณุงุนุช |
| 4 | ~6.5-7GB | โ Safe | โ ูุญุงูุธูโฺฉุงุฑุงูู | 15-20 ุณุงุนุช |
| 3 | ~6-6.5GB | โ Safe | โ ุจุณุงุฑ ูุญุงูุธูโฺฉุงุฑุงูู | 18-23 ุณุงุนุช |
| 2 | ~5.5-6GB | โ Safe | โ ุฎู ูุญุงูุธูโฺฉุงุฑุงูู | 20-30 ุณุงุนุช |
| 1 | ~5-6GB | โ Safe | โ ุจุณุงุฑ ุจุณุงุฑ ูุญุงูุธูโฺฉุงุฑุงูู | 25-35 ุณุงุนุช |

---

## ๐ ุงุฏุงูู ุงุฒ Checkpoint

ุงฺฏุฑ ูุจูุงู ุขููุฒุด ุฑุง ุดุฑูุน ฺฉุฑุฏูโุงุฏ ู ูโุฎูุงูุฏ ุงุฏุงูู ุฏูุฏ:

```cmd
python train.py --resume checkpoints_768x768/checkpoint_best.pth --dataset_path Aariz --model hrnet --image_size 768 768 --batch_size 6 --epochs 200 --lr 3e-4 --warmup_epochs 10 --loss adaptive_wing --mixed_precision --num_workers 2 --save_dir checkpoints_768x768 --log_dir logs_768x768
```

---

## ๐ ุณุงุฎุชุงุฑ ุฎุฑูุฌ

ูพุณ ุงุฒ ุขููุฒุดุ ูุงูโูุง ุฒุฑ ุงุฌุงุฏ ูโุดููุฏ:

```
checkpoints_768x768/
โโโ checkpoint_best.pth      # ุจูุชุฑู ูุฏู (ฺฉูุชุฑู MRE)
โโโ checkpoint_latest.pth     # ุขุฎุฑู checkpoint
โโโ checkpoint_epoch_*.pth    # Checkpoint ูุง ุฏูุฑูโุง

logs_768x768/
โโโ hrnet_YYYYMMDD_HHMMSS/   # ูุงฺฏโูุง TensorBoard
```

---

## ๐ ูุธุงุฑุช ุจุฑ ุขููุฒุด

ุจุฑุง ูุดุงูุฏู ูููุฏุงุฑูุง TensorBoard:

```bash
tensorboard --logdir logs_768x768
```

ุณูพุณ ุจู `http://localhost:6006` ุจุฑูุฏ.

---

## โ๏ธ ุงฺฏุฑ OOM ฺฏุฑูุชุฏ

### ฺฏุฒูู 1: ฺฉุงูุด batch_size
```bash
--batch_size 5  # ุงฺฏุฑ batch_size=6 ุจูุฏ
--batch_size 4  # ุง ฺฉุงูุด ุจู 4
```

### ฺฏุฒูู 2: ฺฉุงูุด num_workers
```bash
--num_workers 1  # ฺฉุงูุด ุงุฒ 2 ุจู 1
```

### ฺฏุฒูู 3: ุจุฑุฑุณ ุงุณุชูุงุฏู VRAM
```python
# ุฏุฑ Python
import torch
print(f"VRAM Used: {torch.cuda.memory_allocated() / 1024**3:.2f} GB")
print(f"VRAM Reserved: {torch.cuda.memory_reserved() / 1024**3:.2f} GB")
```

---

## ๐ก ูฺฉุงุช ููู

1. **Mixed Precision ุงูุฒุงู ุงุณุช**: ุจุฑุง 8GB VRAMุ `--mixed_precision` ุจุงุฏ ูุนุงู ุจุงุดุฏ
2. **ุจุง batch_size=6 ุดุฑูุน ฺฉูุฏ**: ุงู ุจููู ุงุณุช ู ุงุฒ VRAM ุจู ุญุฏุงฺฉุซุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ
3. **num_workers ุฑุง ฺฉู ูฺฏู ุฏุงุฑุฏ**: ุจุฑุง ุตุฑููโุฌู ุฏุฑ VRAM
4. **ุงุฒ HRNet ุงุณุชูุงุฏู ฺฉูุฏ**: ุจุฑุง ุฑุฒูููุดู ุจุงูุง ุจูุชุฑ ุงุณุช

---

## ๐ ููุงุณู ุจุง ุณุงุฒูุง ุฏฺฏุฑ

| Image Size | Batch Size | VRAM | ุฒูุงู/Epoch | ุฒูุงู ฺฉู (200 epoch) |
|------------|------------|------|------------|---------------------|
| 256x256 | 8 | ~3-4GB | ~2-3 min | 7-10 ุณุงุนุช |
| 512x512 | 4-6 | ~4-5GB | ~4-6 min | 13-20 ุณุงุนุช |
| **768x768** | **6** | **~7.5-8GB** | **~3-4 min** | **12-16 ุณุงุนุช** |
| 1024x1024 | 1 | ~6-7GB | ~8-12 min | 27-40 ุณุงุนุช |

---

## ๐ฏ ุชูุตู ููุง

ุจุฑุง RTX 3070 Ti (8GB VRAM) ู ุณุงุฒ 768x768:
- โ ุงุฒ `batch_size=6` + `mixed_precision` ุงุณุชูุงุฏู ฺฉูุฏ (ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ ุงุฒ VRAM)
- โ `num_workers=2` ุชูุธู ฺฉูุฏ
- โ `mixed_precision` ุฑุง ูุนุงู ฺฉูุฏ (ุงูุฒุงู)
- โ ุงุฒ script `train_768x768_rtx3070ti.bat` ุงุณุชูุงุฏู ฺฉูุฏ

**ุงู ุชูุธูุงุช:**
- โ Effective batch size = 6 (3x ุณุฑุนโุชุฑ ุงุฒ batch_size=2)
- โ ุจุฏูู ุฑุณฺฉ OOM (ุจุง margin ฺฉูฺฺฉ)
- โ ุงุณุชูุงุฏู ุงุฒ ~7.5-8GB VRAM (ุงุณุชูุงุฏู ุญุฏุงฺฉุซุฑ)
- โ Performance ุนุงู ุจุง mixed precision

---

**ุชุงุฑุฎ**: 2024-11-01  
**ูุถุนุช**: โ ุชูุธูุงุช ุจููู ุจุฑุง RTX 3070 Ti (8GB VRAM) ุจุง ุณุงุฒ 768x768

